<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>











<head>
<title>Planet SymPy</title>
<link rel="shortcut icon" type="image/png" href="images/sympy_favicon.png"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="http://intertwingly.net/code/venus/">
<link rel="stylesheet" href="planet.css" type="text/css">
<link rel="alternate" href="http://planet.sympy.org/atom.xml" title="" type="application/atom+xml">
</head>

<body>
<h1>Planet SymPy</h1>

<div class="daygroup">
<h2>May 04, 2015</h2>

<div class="channelgroup">







<h3><a href="http://asmeurer.github.io/" title="Aaron Meurer's Blog">Aaron Meurer</a></h3>


<div class="entrygroup" id="http://asmeurer.github.io/posts/python-trickery/">
<h4 lang="en"><a href="http://asmeurer.github.io/posts/python-trickery/">Python Trickery</a></h4>
<div class="entry">
<div class="content">
<div><p>Here are some bits of Python trickery that I have come across. Each of the
following is invalid syntax.  See if you can figure out why</p>
<ol>
<li>
</li></ol>
<pre><code class="language-py">1 + not(2)
</code></pre>
<ol start="2">
<li>
</li></ol>
<pre><code class="language-py">f(*(
i for i in range(10)
if i % 2),
x=3,)
</code></pre></div></div>







<p class="date">
<a href="http://asmeurer.github.io/posts/python-trickery/">by Aaron Meurer at May 04, 2015 07:11 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://sahilshekhawat.github.io" title="Sahil Shekhawat">Sahil Shekhawat</a></h3>


<div class="entrygroup" id="http://sahilshekhawat.github.io/sahilshekhawat/tech/blog/2015/05/04/build-a-blog-with-jekyll-and-github-pages.html">
<h4><a href="http://sahilshekhawat.github.io/sahilshekhawat/tech/blog/2015/05/04/build-a-blog-with-jekyll-and-github-pages.html">Build a blog with Jekyll and Github pages</a></h4>
<div class="entry">
<div class="content">
<p>I recently migrated my blog from Wordpress to Jekyll, a fantastic website generator that's designed for building minimal, static blog posts to be hosted on Github pages. Firstly, I wanted to use Ghost but then simplicity of Jekyll's theming layer and writing workflow had me. </p></div>







<p class="date">
<a href="http://sahilshekhawat.github.io/sahilshekhawat/tech/blog/2015/05/04/build-a-blog-with-jekyll-and-github-pages.html">May 04, 2015 06:02 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>May 03, 2015</h2>

<div class="channelgroup">







<h3><a href="http://sahilshekhawat.github.io" title="Sahil Shekhawat">Sahil Shekhawat</a></h3>


<div class="entrygroup" id="http://sahilshekhawat.github.io/sahilshekhawat/pydy/gsoc/2015/05/04/gsoc-2015-with-pydy.html">
<h4><a href="http://sahilshekhawat.github.io/sahilshekhawat/pydy/gsoc/2015/05/04/gsoc-2015-with-pydy.html">GSoC 2015 with PyDy</a></h4>
<div class="entry">
<div class="content">
<p><img src="http://sahilshekhawat.me/%7B%7B%20site.url%20%7D%7D/assets/images/gsoc15.png" alt="GSoC 2015" /></p></div>







<p class="date">
<a href="http://sahilshekhawat.github.io/sahilshekhawat/pydy/gsoc/2015/05/04/gsoc-2015-with-pydy.html">May 03, 2015 07:00 PM</a>
</p>
</div>
</div>




<div class="entrygroup" id="http://sahilshekhawat.github.io/sahilshekhawat/introduction/2015/05/03/lets-begin-our-adventure.html">
<h4><a href="http://sahilshekhawat.github.io/sahilshekhawat/introduction/2015/05/03/lets-begin-our-adventure.html">Let's begin our adventure!</a></h4>
<div class="entry">
<div class="content">
<p>Lets get the introduction out of our way first. I am Sahil Shekhawat, a sophomore majoring in Computer Science. I am <strong>Google Summer of Code</strong> intern at <a href="http://www.pydy.org/">PyDy</a> and have worked with <a href="https://www.usebackpack.com/about">Backpack</a> for about one year. Thats pretty much it!</p></div>







<p class="date">
<a href="http://sahilshekhawat.github.io/sahilshekhawat/introduction/2015/05/03/lets-begin-our-adventure.html">May 03, 2015 06:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>May 01, 2015</h2>

<div class="channelgroup">







<h3><a href="http://www.sudhanshumishra.in/" title="Shortlog">Sudhanshu Mishra</a></h3>


<div class="entrygroup" id="tag:www.sudhanshumishra.in,2015-05-01:posts/gsoc15-with-sympy/">
<h4><a href="http://www.sudhanshumishra.in/posts/gsoc15-with-sympy/">Google Summer of Code 2015 with SymPy</a></h4>
<div class="entry">
<div class="content">
<p align="center">
<img src="http://www.sudhanshumishra.in/images/gsoc15.png" />
</p>

<p>Once again I got accepted into Google Summer of Code! I'll be working on assumptions system of SymPy. This time, SymPy is participating under Python Software Foundation.</p>
<p align="center">
<img src="http://www.sudhanshumishra.in/images/sympy.png" />
</p>

<p><em>SymPy is a Python library for symbolic mathematics. It aims to become a full-featured <a href="https://en.wikipedia.org/wiki/Computer_algebra_system">Computer Algebra System</a> while keeping the code as simple as possible in order to be comprehensible and easily extensible.</em></p>
<p>Here's what ideas page says about the project:</p>
<div style="padding: 10px; border-radius: 5px;">
<i>
The project is to completely remove our old assumptions system, replacing it
with the new one.<br /><br />

The difference between the two systems is outlined in the first two sections of this blog post.  A list of detailed issues can be found at this issue.<br /><br />

This project is challenging.  It requires deep understanding of the core of SymPy, basic logical inference, excellent code organization, and attention to performance.  It is also very important and of high value to the SymPy community.<br /><br />

You should take a look at the work started at
<a href="https://github.com/sympy/sympy/pull/2508">https://github.com/sympy/sympy/pull/2508</a>. Numerous related tasks are mentioned in the "Ideas" section.
</i>
</div>

<p>My mentors are <a href="https://github.com/asmeurer">Aaron Meurer</a> and <a href="https://github.com/tjl">Tim Lahey</a>.</p>
<p>Currently SymPy has two versions of mathematical assumptions. One is called "old assumptions" because a new implementation has been carried out recently. Since "old assumptions" were developed a long back, they are more mature and faster. However, because of its design, it is not capable of doing some interesting things like assuming something over an expression e.g. <code>x**2 + 2 &gt; 0</code>.</p>
<p>Old assumptions store assumptions in the object itself. For example, the code <code>x = Symbol('x', finite=True)</code> will store the assumption that the <code>x</code> is finite in this object itself.</p>
<p>Both systems expose different APIs to query the facts:</p>
<p>Old:</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="n">imaginary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_real</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="bp">False</span>
</pre></div>


<p>New:</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">'y'</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">ask</span><span class="p">(</span><span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="bp">True</span>
</pre></div>


<p>My work includes but is not limited to:</p>
<ul>
<li>Identifying inconsistencies between old and new assumptions and eliminate them.</li>
<li>Improving performance of the new assumptions.</li>
<li>Making new assumptions read old assumptions.</li>
<li>Removing assumptions from the core as much as possible.</li>
<li>Making API of old assumptions call new assumptions internally.</li>
</ul>
<p>That's all for now. Looking forward to a great summer!</p></div>







<p class="date">
<a href="http://www.sudhanshumishra.in/posts/gsoc15-with-sympy/">by Sudhanshu Mishra at May 01, 2015 05:30 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>April 20, 2015</h2>

<div class="channelgroup">







<h3><a href="http://fa.bianp.net/" title="I say things">Fabian Pedregosa</a></h3>


<div class="entrygroup" id="tag:fa.bianp.net,2015-04-21:blog/2015/ipythonjupyter-notebook-gallery-draft/">
<h4><a href="http://fa.bianp.net/blog/2015/ipythonjupyter-notebook-gallery-draft/">IPython/Jupyter notebook gallery - Draft</a></h4>
<div class="entry">
<div class="content">
<p>TL;DR I created a gallery for IPython/Jupyter notebooks. <a href="http://nb.bianp.net">Check it out :-)</a></p>
<div style="text-align: center;">
<img src="http://fa.bianp.net/uploads/2015/screenshot_nbgallery.png" alt="Notebook gallery" width="600px" />
</div>

<p>A couple of months ago I put online a website that displays a collection of IPython/Jupyter notebooks. The is a website that collects user-submitted and publicly available notebooks and displays them with a nice screenshot. The great thing about this website compared to <a href="https://wakari.io/gallery">other</a> <a href="https://github.com/ipython/ipython/wiki/A-gallery-of-interesting-IPython-Notebooks">similar</a> efforts is that this one updates and categorizes the notebooks (by date and views) automatically. You can even search for anything in this database that contains already more than 400 notebooks!</p>
<h2>Vision</h2>
<p>I would like to make a website where it is possible to</p>
<ol>
<li>
<p>Find the notebook you are looking for. There is precious information (examples, documentation, tutorials, etc.) contained within IPython/Jupyter notebooks. It should be easy to find this information.</p>
</li>
<li>
<p>Discover new notebooks. I would like to see new notebooks as they are submitted in order to discover new notebooks, possibly about new technologies that I did not know about.</p>
</li>
</ol>
<h2>How it works</h2>
<p>Under the hood there's a django app, for which the source code lives <a href="https://github.com/fabianp/nbgallery">here</a> (don't hesitate to use the issues feature in github to suggest features or to report bugs). To propose new notebooks there's a tab where anyone can leave the URL of a notebook. If all goes right, the django app will take a screenshot will be taken and incorporated into the database. The only non-trivial part of this process is to take the screenshot, for which I use a <a href="https://github.com/fabianp/nbgallery/blob/master/web/templates/screenshot.js">bit of javascript</a> around <a href="http://phantomjs.org/">phantomjs</a>.</p>
<h2>Future plans</h2>
<p>What you see is just the beginning!. As time permits I would like to implement user authentication so that registered users can bookmark their favorite notebooks, up and down-vote notebooks etc. Cathegorization of notebooks (e.g. in bins such as Math, Phisics, Machine Learning, R, Python, Julia, etc.) is also high on my list. Leave me a comment if you would like to see some specific feature!</p></div>







<p class="date">
<a href="http://fa.bianp.net/blog/2015/ipythonjupyter-notebook-gallery-draft/">by Fabian Pedregosa at April 20, 2015 10:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>April 06, 2015</h2>

<div class="channelgroup">







<h3><a href="http://fa.bianp.net/" title="I say things">Fabian Pedregosa</a></h3>


<div class="entrygroup" id="tag:fa.bianp.net,2015-04-07:blog/2015/pydata-paris-april-2015/">
<h4><a href="http://fa.bianp.net/blog/2015/pydata-paris-april-2015/">PyData Paris - April 2015</a></h4>
<div class="entry">
<div class="content">
<p>Last Friday was <a href="http://pydataparis.joinux.org/schedule.html">PyData Paris</a>, in words of the organizers, ''a gathering of users and developers of data analysis tools in Python''. </p>
<p><img width="600px" src="http://pydataparis.joinux.org/static/images/PyDataLogoBig-Paris2015.png" /></p>
<p>The organizers did a great job in putting together and the event started already with a full room for <a href="http://gael-varoquaux.info/">Gael's</a> keynote</p>
<div style="text-align: center;">
<img src="https://pbs.twimg.com/media/CBplCb_WIAEzytd.jpg" alt="Gael's keynote" width="600px" /></div>

<p>My take-away message from the talks is that Python has grown in 5 years from a language marginally used in some research environments into one of the main languages for data science used both in research labs and industrial environment.</p>
<p>My personal highlights were (note that there were two parallel tracks)</p>
<ul>
<li>
<p><a href="http://ianozsvald.com/">Ian Ozsvald's</a> talk on <a href="http://ianozsvald.com/2015/04/03/pydataparis-2015-and-cleaning-confused-collections-of-characters/">Cleaning Confused Collections of Characters</a>. Ian gave a very practical talk, full of real world examples. The slides have already been uploaded on <a href="http://ianozsvald.com/2015/04/03/pydataparis-2015-and-cleaning-confused-collections-of-characters/">his website</a>. Many tips and many pointers to libraries. In particular, I discovered <a href="http://ftfy.readthedocs.org">fixes text for you</a>.</p>
</li>
<li>
<p><a href="http://cazencott.info/">Chloe-Agathe</a> gave a short talk on <a href="http://dreamchallenges.org/">DREAM challenges</a>. In her talk she mentioned <a href="http://sheffieldml.github.io/GPy/">GPy</a>. One year ago, I visited <a href="http://inverseprobability.com/">Neil Lawrence</a> at his lab in Sheffield and at that point they were in the process of migrating their Matlab codebase into Python (the GPy project). I'm very glad to see that the project is succeeding and being used by other research institutions.</p>
</li>
<li>
<p><a href="http://serge.liyun.free.fr/serge/">Serge Guelton</a> and Pierrick Brunet presented “<a href="http://pythonhosted.org/pythran/">Pythran</a>: Static Compilation of Parallel Scientific Kernels”. From their own documentation: “Pythran is a python to c++ compiler for a subset of the python language. It takes a python module annotated with a few interface description and turns it into a native python module with the same interface, but (hopefully) faster”. The project seems promising although I do not have had experience as to judge the quality of their implementation.</p>
</li>
<li>
<p>Antoine Pitrou presented: “<a href="http://numba.pydata.org/">Numba</a>, a JIT compiler for fast numerical code”. I must say that I'm an avid user of Numba so of course I was looking forward to this talk. One thing I didn't know is that support for CUDA is being implemented into Numba via the <code>@cuda.jit</code> decorator. From <a href="http://docs.continuum.io/numbapro/">their website</a> it looks like this is only available in the Numba Pro version (not free).</p>
</li>
<li>
<p>Kirill Smelkov presented <a href="https://pypi.python.org/pypi/wendelin.core">wendelin.core</a>, an approach to perform out-of-core computations with numpy. Slides can be found <a href="http://www.wendelin.io/NXD-Wendelin.Core.Non.Secret?format=pdf">here</a>.</p>
</li>
<li>
<p>Finally, <a href="https://twitter.com/francescalted">Frances Alted</a> gave the final keynote on “New Trends In Storing And Analyzing Large Data Silos With Python”. Among the projects he mentioned, I found particularly interesting <a href="http://bcolz.blosc.org/">bcolz</a>, his current main project and <a href="https://github.com/aterrel/dynd-python">DyND</a>, a Python wrapper around a multi-dimensional array library.</p>
</li>
</ul></div>







<p class="date">
<a href="http://fa.bianp.net/blog/2015/pydata-paris-april-2015/">by Fabian Pedregosa at April 06, 2015 10:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>December 09, 2014</h2>

<div class="channelgroup">







<h3><a href="http://sushant-hiray.me/{{ site.url }}" title="Sushant Hiray's Blog - Posts tagged sympy/gsoc/csympy">Sushant Hiray</a></h3>


<div class="entrygroup" id="http://sushant-hiray.me/{{ site.url }}{{ post.url }}">
<h4><a href="http://sushant-hiray.me/{{ site.url }}{{ post.url }}">{{ post.title | xml_escape }}</a></h4>
<div class="entry">
<div class="content">
{{ post.content | xml_escape }}</div>







<p class="date">
<a href="http://sushant-hiray.me/{{ site.url }}{{ post.url }}">December 09, 2014 04:41 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>December 04, 2014</h2>

<div class="channelgroup">







<h3><a href="http://fa.bianp.net/" title="I say things">Fabian Pedregosa</a></h3>


<div class="entrygroup" id="tag:fa.bianp.net,2014-12-05:blog/2014/data-driven-hemodynamic-response-function-estimation/">
<h4><a href="http://fa.bianp.net/blog/2014/data-driven-hemodynamic-response-function-estimation/">Data-driven hemodynamic response function estimation</a></h4>
<div class="entry">
<div class="content">
<p>My <a href="http://www.sciencedirect.com/science/article/pii/S1053811914008027">latest research paper</a>[<sup id="fnref:1"><a href="http://fa.bianp.net/blog/feed/#fn:1" class="footnote-ref" rel="footnote">1</a></sup>]  deals with the estimation of the hemodynamic response function (HRF) from fMRI data. </p>
<div style="text-align: center;">
<img width="600px" src="http://fa.bianp.net/images/2014/graphical_abstract.jpg" />
</div>

<p>This is an important topic since the knowledge of a  hemodynamic response function is what makes it possible to extract the brain activation maps that are used in most of the impressive applications of machine learning to fMRI, such as (but not limited to) the reconstruction of visual images from brain activity [<sup id="fnref:2"><a href="http://fa.bianp.net/blog/feed/#fn:2" class="footnote-ref" rel="footnote">2</a></sup>] [<sup id="fnref:3"><a href="http://fa.bianp.net/blog/feed/#fn:3" class="footnote-ref" rel="footnote">3</a></sup>] or the decoding of numbers [<sup id="fnref:4"><a href="http://fa.bianp.net/blog/feed/#fn:4" class="footnote-ref" rel="footnote">4</a></sup>].</p>
<p>Besides the more traditional paper that describes the method, I've put online the <a href="https://pypi.python.org/pypi/hrf_estimation">code I used for the experiments</a>. The code at this stage is far from perfect but it should help in reproducing the results or improving the method. I've also put online an <a href="http://nbviewer.ipython.org/github/fabianp/hrf_estimation/blob/master/examples/hrf_estimation%20example.ipynb">ipython notebook</a> with the analysis of a small piece of data. I'm obviously glad to receive feedback/bug reports/patches for this code.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Pedregosa, Fabian, et al. <a href="http://www.sciencedirect.com/science/article/pii/S1053811914008027">"Data-driven HRF estimation for encoding and decoding models."</a>, Neuroimage, (2014). Also available <a href="http://arxiv.org/abs/1402.7015">here</a> as an arXiv preprint. <a href="http://fa.bianp.net/blog/feed/#fnref:1" rev="footnote" class="footnote-backref" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>Miyawaki, Yoichi et al., <a href="http://www.sciencedirect.com/science/article/pii/S0896627308009586">"Visual Image Reconstruction from Human Brain Activity using a Combination of Multiscale Local Image Decoders", Neuron (2008)</a>. <a href="http://fa.bianp.net/blog/feed/#fnref:2" rev="footnote" class="footnote-backref" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>Kay, Kendrick N., et al. "Identifying natural images from human brain activity." Nature 452.7185 (2008). <a href="http://fa.bianp.net/blog/feed/#fnref:3" rev="footnote" class="footnote-backref" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>Eger, Evelyn, et al. <a href="http://www.sciencedirect.com/science/article/pii/S0960982209016236">"Deciphering cortical number coding from human brain activity patterns."</a> Current Biology 19.19 (2009). <a href="http://fa.bianp.net/blog/feed/#fnref:4" rev="footnote" class="footnote-backref" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
</ol>
</div></div>







<p class="date">
<a href="http://fa.bianp.net/blog/2014/data-driven-hemodynamic-response-function-estimation/">by Fabian Pedregosa at December 04, 2014 11:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>November 06, 2014</h2>

<div class="channelgroup">







<h3><a href="http://fa.bianp.net/" title="I say things">Fabian Pedregosa</a></h3>


<div class="entrygroup" id="tag:fa.bianp.net,2014-11-07:blog/2014/plot-memory-usage-as-a-function-of-time/">
<h4><a href="http://fa.bianp.net/blog/2014/plot-memory-usage-as-a-function-of-time/">Plot memory usage as a function of time</a></h4>
<div class="entry">
<div class="content">
<p>One of the lesser known features of the <a href="https://pypi.python.org/pypi/memory_profiler">memory_profiler package</a> is its ability to plot memory consumption as a function of time. This was implemented by my friend Philippe Gervais, previously a colleague at INRIA and now working for Google.</p>
<p>With this feature it is possible to generate very easily a plot of the memory consumption as a function of time. The result will be something like this:</p>
<p><img width="800px" src="http://fa.bianp.net/blog/images/2014/mprof_example.png" /></p>
<p>where you can see the memory used (in the y-axis) as a function of time (x-axis). Furthermore, we have used two functions, <code>test1</code> and <code>test2</code>, and it is possible to see with the colored brackets at what time do these functions start and finish.</p>
<p>This plot was generated with the following simple script:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">time</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">test1</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">test2</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">100000</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">test1</span><span class="p">()</span>
    <span class="n">test2</span><span class="p">()</span>
</pre></div>


<p>what happens here is that we have two functions, <code>test1()</code> and <code>test2()</code> in which we create two lists of different sizes (the one in <code>test2</code> is bigger). We call time.sleep() for one second so that the function does not return too soon and so we have time to get reliable memory measurements. </p>
<p>The decorator <code>@profile</code> is optional and is useful so that <code>memory_profiler</code> knows when the function has been called so he can plot the brackets indicating that. If you don't put the decorator, the example will work just fine except that the brackets will not appear in your plot.</p>
<p>Suppose we have saved the script as <code>test1.py<code>. We run the script as</code></code></p><code><code>
<div class="highlight"><pre><span class="nv">$ </span>mprof run test1.py
</pre></div>


<p>where mprof is an executable provided by memory_profiler. If the above command was successful it will print something like this</p>
<div class="highlight"><pre><span class="nv">$ </span>mprof run test1.py
mprof: Sampling memory every 0.1s
running as a Python program...
</pre></div>


<p>The above command will create a <code>.dat</code> file on your current working directory, something like <code>mprofile_20141108113511.dat&lt;/ocde&gt;. This file (you can inspect it, it's a text file) contains the memory measurements for your program.</code></p><code>
<p>You can now plot the memory measurements with the command</p>
<div class="highlight"><pre><span class="nv">$ </span>mprof plot
</pre></div>


<p>This will open a matplotlib window and show you the plot:</p>
<p><img width="800px" src="http://fa.bianp.net/blog/images/2014/mprof_example2.png" /></p>
<p>As you see, attention has been paid to the default values so that the plot it generates already looks decent without much effort. The not-so-nice-part is that, at least as of November 2014, if you want to customize the plot, well, you'll have to look and modify the mprof script. Some refactoring is still needed in order to make it easier to customize the plots (work in progress).</p></code></code></code></div>







<p class="date">
<a href="http://fa.bianp.net/blog/2014/plot-memory-usage-as-a-function-of-time/">by Fabian Pedregosa at November 06, 2014 11:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 21, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-4417099267739972005">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">Last blog of my GSoC period with SymPy.<br /><br />My last few weeks went a bit disorganized. It was realized that Formal Power Series using lazy evaluation scheme could not be done. That is because there was no way to incorporate python generators into SymPy code-base.<br />So a different approach i.e. formal power series using formula was implemented.<br />In this approach, series is represented by a general term, also called the generator.<br />For e.g. series expansion for exp(x) would be captured by:-<br />exp(x) = Sum(x**k/k!, (k, 0, oo))<br /><br />A problem came when I started implementing using this approach. Representation of this general term was troublesome. After doing all arithmetics, the same representation must hold.<br />Initially, the representation used was sparse representation i.e. list of tuples.<br />E.g.:- If f(x) = Sum(x**k/k! + x**(2*k)/2*k!, (k, 0, oo)) then this would be represented as [(1/k!, k), (1/2*k!, 2*k)].<br />I had trouble representing this way and ultimately switched to dense representation.<br /><br />In this series is always represented as single expression c(k) where c(k) is the coefficient of x**k. c(k) is often a Piecewise function.<br /><br /><br />Overall, the last few weeks were not planned to go like this. They went unplanned and less work was done. It was mainly because I was not clear enough on how to represent formal power series precisely which caused problems in the end.<br />Anyways, I learned a lot and it was a nice experience working with SymPy. <br /><br /></div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/08/last-blog-of-my-gsoc-period-with-sympy.html">by Avichal Dayal (noreply@blogger.com) at August 21, 2014 06:48 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 20, 2014</h2>

<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/2014/08/21/gsoc-end-vector-module/">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/08/21/gsoc-end-vector-module/">GSoC end: Vector Module</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Phew. Sorry about the late blogpost (and a missed one last week). Google Summer of Code is now officially over, and I am happy to report that I was successful in building a basic vector-manipulation/vector-calculus module for SymPy. The code is now in SymPy’s master, which means it will be released with SymPy 0.7.6. Its been a great 3 months, with intensive software designing, coding and bug-fixing going hand-in-hand to being out ‘sympy.vector’.</p>
<p>I would like to thank Jason Moore, my mentor during this year’s GSoC. Initially, I had begun on my usual path of the ‘lets start coding immediately’ philosophy, but he made me wait it out, figure out extensive use cases, and give stress on the software designing process. This was the first software written by me, with the test-driven development approach. And must say, it does benefit a lot. There were quite a few tricky places, but I am glad I got through it all <span class="wp-smiley wp-emoji wp-emoji-smile" title=":-)">:-)</span>. I couldn’t implement all I wanted to, but atleast I am happy that all I wrote is stable, and works perfectly <span class="wp-smiley wp-emoji wp-emoji-bigsmile" title=":-D">:-D</span>.</p>
<p>The docs are expected to go in soon, after which you (if interested) may read through them and understand how to use the new module. All in all, its been a great summer!</p>
<p> </p>
<p>Cheers!</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/26/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/26/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=26&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/08/21/gsoc-end-vector-module/">by srjoglekar246 at August 20, 2014 08:29 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://jcrist.github.io/" title="Marginally Stable">Jim Crist</a></h3>


<div class="entrygroup" id="tag:,2014-08-20:gsoc-week-12-13.html">
<h4><a href="http://jcrist.github.io/gsoc-week-12-13.html">GSoC Week 12 &amp; 13: The End</a></h4>
<div class="entry">
<div class="content">
<p>The GSoC program officially ended this Monday, and so my work for SymPy has
concluded. I got <em>a lot</em> done in these last two weeks though. Here's what's
new. In order of completion:</p>
<h3>Complete overhaul of the codeprinting system</h3>
<p>I wasn't happy with the way the codeprinters were done previously. There was a
lot of redundant code throughout <code>ccode</code>, <code>fcode</code> and <code>jscode</code> (the main three
printers).  They also had a lot of special case code in the <code>doprint</code> method
for handling multiline statements, which I felt could be better accomplished
using <a href="http://en.wikipedia.org/wiki/Visitor_pattern">the visitor pattern</a> that
is used by all the other printers. The issue is that some nodes need to know if
they are part of a larger expression, or part of an assignment. For example, in
<code>C</code> <code>Piecewise</code> are printed as if statements if they contain an assignment, or
inline using the <a href="http://en.wikipedia.org/wiki/Ternary_operation">ternary
operator</a> if they don't.</p>
<p>After some thought, this was solved by adding an <code>Assignment</code> node that
contains this information, and then dispatching to it in the printer just like
any other node. Less special case code, and allowed the base <code>CodePrinter</code>
class to contain a lot of the redundancies. For those implementing a new code
printer (perhaps for Octave?) all you'd need to do is add how to print certain
operators, and a dictionary of function translations.  Everything else <em>should</em>
just work. I may add little cleanups here and there, but I'm pretty happy with
the refactor.</p>
<h3>Code printers now support matrices</h3>
<p>This was the original goal, but got put aside to do the previously described
refactor. The codeprinters now support matrices - both as inputs and outputs.
For example, the following now works:</p>
<div class="highlight"><pre><span class="c"># Expressions inside a matrix</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">'x, y, z'</span><span class="p">)</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Piecewise</span><span class="p">((</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="bp">True</span><span class="p">)),</span> <span class="n">sin</span><span class="p">(</span><span class="n">z</span><span class="p">)])</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">MatrixSymbol</span><span class="p">(</span><span class="s">'A'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ccode</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>
</pre></div>


<div class="md_output">

<div class="highlight"><pre><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
   <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>
</pre></div>


</div>

<div class="highlight"><pre><span class="c"># Matrix elements inside expressions</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">Piecewise</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">True</span><span class="p">))</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">ccode</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</pre></div>


<div class="md_output">

<div class="highlight"><pre><span class="p">((</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span>
    <span class="mi">2</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">)</span>
<span class="o">:</span> <span class="p">(</span>
    <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">))</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>


</div>

<div class="highlight"><pre><span class="c"># Matrix elemnts in expressions inside a matrix</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">MatrixSymbol</span><span class="p">(</span><span class="s">'q'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSymbol</span><span class="p">(</span><span class="s">'M'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([[</span><span class="n">sin</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cos</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])],</span>
    <span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">q</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="k">print</span><span class="p">(</span><span class="n">ccode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">M</span><span class="p">))</span>
</pre></div>


<div class="md_output">

<div class="highlight"><pre><span class="n">M</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="n">M</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">M</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">M</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">q</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="n">M</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="n">M</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">M</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">q</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mf">1.0</span><span class="o">/</span><span class="n">q</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="n">M</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">M</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>


</div>

<p>There even was a <code>Piecewise</code> inside a <code>Matrix</code> in there. As long as there is an
assignment between two compatible types (matrix -&gt; matrix, scalar -&gt; scalar),
the new codeprinters should print out valid expressions.</p>
<h3><code>codegen</code> now supports matrices</h3>
<p>This is more of a continuation of the above. The code generators have been
modified to recognize instances of <code>MatrixSymbol</code> as array variables and act
accordingly. There actually wasn't that much to change here to make this work.
The biggest change that happened is that <em>all</em> <code>C</code> functions that have a return
value (non <code>void</code> functions) allocate a local variable of the same type. This
is to cover a larger set of expressions, while still generating valid code. So
now, when performing codegen on "<code>sin(x)</code>" you won't get "<code>return sin(x)</code>",
you'll get:</p>
<div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">codegen</span><span class="p">((</span><span class="s">'sin_c'</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="s">"C"</span><span class="p">,</span> <span class="s">"file"</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>


<div class="md_output">

<div class="highlight"><pre><span class="kt">double</span> <span class="nf">sin_c</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>

   <span class="kt">double</span> <span class="n">sin_c_result</span><span class="p">;</span>
   <span class="n">sin_c_result</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
   <span class="k">return</span> <span class="n">sin_c_result</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>


</div>

<p>This isn't as pretty, but handling return inside expressions is a tricky
problem, and this solves it without much work. Modern compilers should remove
the variable assignment if it's unnecessary, so there shouldn't be a resulting
speed loss in the code.</p>
<h3><code>Cython</code> wrapper for <code>autowrap</code> now works</h3>
<p>There was a code wrapper for <code>Cython</code> in the codebase, but I don't think it has
ever worked. It does now:) It can do everything <code>f2py</code> can do, and I plan on
adding more useful features. In it's current state it can:</p>
<ul>
<li>Handle both scalar and matrix input, input-output and output arguments</li>
<li>Internally allocate output arguments</li>
<li>Pull inferred variables (such as matrix dimensions) out of the function signature</li>
<li>Create a multiple return value tuple</li>
</ul>
<p>The last thing I want to do to make this <em>really</em> nice is to add support for
informative docstrings. Even so, this is already usable:</p>
<div class="highlight"><pre><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">'x, y, z'</span><span class="p">)</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Piecewise</span><span class="p">((</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="bp">True</span><span class="p">)),</span> <span class="n">sin</span><span class="p">(</span><span class="n">z</span><span class="p">)])</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">autowrap</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="s">'c'</span><span class="p">,</span> <span class="s">'cython'</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>


<div class="md_output">

<div class="highlight"><pre><span class="n">array</span><span class="p">([[</span> <span class="mf">2.</span>        <span class="p">],</span>
       <span class="p">[</span> <span class="mf">3.</span>        <span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.14112001</span><span class="p">]])</span>
</pre></div>


</div>

<p>For some reason the <code>Fortran</code>/<code>f2py</code> has around a 2 microseconds faster than
the <code>C</code>/<code>Cython</code> code. I think this has something to do with array allocations,
but I'm not sure. For larger expressions they're pretty equal, so this
shouldn't be that big of a deal. I still plan to look into code optimizations I
could make in the Cython wrapper.</p>
<h2>Project Status</h2>
<p>Overall, I accomplished <em>most</em> of what I set out to do this summer. Some things
(pre-solution linearization) were nixed from the project due to changing goals.
Here's a short list of what was done:</p>
<ol>
<li>
<p>General linearization methods added for both <code>KanesMethod</code> and <code>LagrangesMethod</code>.</p>
</li>
<li>
<p>Code cleanup and speedup for <code>KanesMethod</code> and <code>LagrangesMethod</code>.</p>
</li>
<li>
<p>Creation of <code>msubs</code> - a specialized <code>subs</code> function for mechanics
   expressions. This runs <em>significantly</em> faster than the default <code>subs</code>, while
   adding some niceities (selective simplification).</p>
</li>
<li>
<p>Complete overhaul of codeprinters. Fixed a lot of bugs.</p>
</li>
<li>
<p>Addition of support for matrices in code printers, code generators, and <code>autowrap</code>.</p>
</li>
<li>
<p>Overhaul of <code>Cython</code> codewrapper. It works now, and does some nice things to
   make the wrapped functions more pythonic.</p>
</li>
<li>
<p>Documentation for the above.</p>
</li>
</ol>
<h2>The Future</h2>
<p>I had an excellent summer working for SymPy, and I plan on continuing to
contribute. I have some code for discretization that I've been using for my
research that may be of interest to the mechanics group. I also want to get
common sub-expression elimination added to the code generators, as this kind of
optimization may result in speedups for the large expressions we see in
mechanics. My contributions will unfortunately be less frequent, as I need to
really focus on research and finishing my degree, but I still hope to help out.</p>
<p>I plan on writing another post in the next few days about the GSoC experience
as a whole, so I won't touch on that here. Let me just say thank you to Jason,
Luke, Oliver, Sachin, Tarun, Aaron, and all the other wonderful people that
have offered me guidance and support throughout the summer. You guys are
awesome.</p></div>







<p class="date">
<a href="http://jcrist.github.io/gsoc-week-12-13.html">by Jim Crist at August 20, 2014 07:43 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 17, 2014</h2>

<div class="channelgroup">







<h3><a href="http://asmeurer.github.io/" title="Aaron Meurer's Blog">Aaron Meurer</a></h3>


<div class="entrygroup" id="http://asmeurer.github.io/posts/playing-with-swift-and-spritekit/">
<h4 lang="en"><a href="http://asmeurer.github.io/posts/playing-with-swift-and-spritekit/">Playing with Swift and SpriteKit</a></h4>
<div class="entry">
<div class="content">
<div><p>I've always wanted to learn how to write native apps for iOS and the Mac as
long as either has existed.  However, the barrier of entry has always been too
high, given that I only ever had time to play with them as a hobby.  The
Objective-C programming language is a bit complicated to learn, especially
alongside all the memory management that you have to do (and it doesn't help
that Apple has gone through several memory management schemes through Mac OS X
versions).  To add on to that, the Cocoa framework is huge, and it's quite
daunting to even know where to get started with it.</p>
<p>With Apple's announcement of the
<a href="https://developer.apple.com/swift/">Swift programming language</a> in June, it
was clear to me that the language would significantly lower the barrier of
entry.  The <a href="https://developer.apple.com/xcode/downloads/">XCode 6 beta</a> is
now public (i.e., you do not need to have a paid Apple Developer account to
access it), so anyone can play with Swift.</p>
<p>Note that I am still <em>very</em> new to both Swift and iOS development in general,
so it's quite likely that some of the things I mention here are actually bad
ideas.  If you know more than I do and spot a bad thing that I am doing,
please mention it in the comments.</p>
<p>It's also possible that some of the assumptions I've made about the Swift
language or the SpriteKit framework are actually wrong. Please remember that I
am still a beginner and take what I say with a grain of salt.</p>
<h2>The Swift Language</h2>
<p>If you don't know how to program at all, I don't know how well this will work
for you. I already know several language, especially Python, so my experience
derives from that.</p>
<p>First, read through the
<a href="https://developer.apple.com/swift/resources/">Swift language guide</a>. If you
have XCode 6, you can read it interactively as a Playground. I only have read
through the first part so far, which gives a high-level overview of the
language.</p>
<p>The Swift language is actually quite easy to learn, especially if you already
know a high-level language like Python.  A few important things:</p>
<ul>
<li><p><code>var</code> and <code>let</code> seem a bit confusing.  The difference is actually quite
simple: <code>var</code> denotes a variable that can change and <code>let</code> denotes a
variable that cannot.  You could in theory just use <code>var</code> for everything,
but <code>let</code> lets the compiler spot mistakes for you, and it also probably lets
it make your code faster.  If you intend to never change the value of a
variable, use <code>let</code>.</p></li>
<li><p>Swift uses type inference, meaning that you usually don't need to specify
types. But when you do, you do so by putting a <code>:</code> after the variable name,
like <code>var a: Int = 2</code> or <code>func f(a: Int)</code>.  The exception is the return type
of a function, which uses the arrow <code>-&gt;</code> (if you are familiar with Python 3
type annotations, the syntax is exactly the same), <code>func f(a: Int) -&gt; Int</code>.</p></li>
<li><p>Swift uses <code>?</code> after a type name to indicate that a variable could be its
given type, or <code>nil</code>. If you are familiar with Haskell, this is like the
Maybe monad.  I know very little Haskell, so I don't know if Swift's
implementation of <code>?</code> is truly a Monad.</p>
<p>Roughly speaking, in many circumstances, you don't know if a variable will
actually be the given type or not. A good example of this is with
dictionaries. <code>var a: [String: Int]</code> creates a dictionary that maps
strings to integers. If you manipulate this dictionary, and then access a
key from it, like <code>a[b]</code>, there is no way for the compiler to know if that
key will really be in the dictionary. If the key is in the dictionary, you
will get the value of that key. Otherwise, you will get <code>nil</code>. Hence, the
type of <code>a[b]</code> is <code>Int?</code>.</p>
<p>Swift uses <code>!</code> to indicate that the value is not <code>nil</code>, which tells the
compiler to compile code that doesn't check for that case.</p>
<p>For the most part, you can ignore this as well, at least when you
start. Just write code as you would, let XCode add in the types for you, and
only worry about types if the compiler tells you something is wrong.</p></li>
<li><p>Swift functions often require the parameters be named, for instance, you
have to write <code>CGSize(width: 1, height: 2)</code> instead of just <code>CGSize(1, 2)</code>. This is both for clarity (the former is much easier to read if you
aren't familiar with the API for <code>CGSize</code>), and because Swift allows
polymorphism, i.e., you can define different initializers for the same class
with different type signatures. For example, <code>CGRect</code> can be initialized as
<code>CGRect(origin: CGPoint, size: CGSize)</code> or <code>CGRect(x: Int, y: Int, width: Int, height: Int)</code>. This can lead to ambiguities in some cases unless you
explicitly tell the compiler which version to use.</p></li>
</ul>
<p>I've found Swift to be a very strict language. I don't mean this in the sense
described by
<a href="https://en.wikipedia.org/wiki/Strict_programming_language">this Wikipedia article</a>. What
I mean is that Swift typically only lets you do things one way.  This is
similar to Python's "one way to do it," except Swift enforces this at the
language level.</p>
<p>A nice example of this is that I rarely get a warning from the Swift compiler.
Just about every message I've gotten from the compiler has been an error. The
difference is that the program will still compile and run with a warning. This
is different from C, C++, and Objective-C, which have many warnings that the
compiler will still compile with. These warnings usually are for things like
an incorrect pointer type. Since there is really only one type in C, the
integer (because all data in memory is just integers), the program can still
run even if you mix your types up a bit.</p>
<p>There are also many cases where Swift seems maybe too strict about things,
although it's clear that it is doing it to try to stray people away from
common mistakes and antipatterns. For example, the condition of an <code>if</code>
statement in Swift must always be of type <code>Bool</code>. Unlike languages like
Python, things do not have implicit boolean values. <code>if 1</code> is a syntax
error. So is <code>if a</code> unless <code>a</code> is type <code>Bool</code>.</p>
<p>This ends up not being a big problem. The things Swift forces you to do feel
like good programming practices.  This is not unlike how Python "forces" you
to keep your code indented correctly.  It feels very different from a language
like Java, where the things that you are forced to do all feel like they are
there simply to make the compiler writer's life easier.  And indeed, unlike
Java and Objective-C and much like Python, Swift code requires very little
boilerplate.  There are no header files for instance.</p>
<p>So all said and done, I like Swift. I don't like it as much as Python (I also
don't have my head wrapped around it as much as Python). But it's far better
than Objective-C, and that's what matters. Frankly, my biggest gripe with it
is the ubiquitous use of CamelCasing and two letter prefixing (<code>NS</code>, <code>CG</code>,
<code>SK</code>; I don't know if there's a name for this) in the API. I adamantly refuse
to do this with my own variables, because I believe CamelCase reduces
readability over underscore_casing. I like the Python convention to use
underscore_casing for variables, functions, and methods, and CamelCase for
classes (because classes are kind of like proper nouns, and CamelCase is as
close to Capitalization as possible in programming language conventions).</p>
<h2>Learn to read Objective-C</h2>
<p>While it is not necessary to write Objective-C any more, it is a good idea to
know how to read it. The reason is that a lot of good resources on the
internet are still in Objective-C (also a lot of Apple's example
documentation). The API names are the same, so this mainly boils down to
understanding how to convert the basic syntax to Swift. Reading the section of
the <a href="https://en.wikipedia.org/wiki/Objective_C#Syntax">Wikipedia article</a> on
the syntax of Objective-C should be enough.</p>
<p>For instance</p>
<pre><code class="language-objective-c">[touch locationInNode:self]
</code></pre>
<p>would be translated to</p>
<pre><code class="language-swift">touch.locationInNode(self)
</code></pre>
<h2>Use XCode</h2>
<p>If you are comfortable with the Swift language itself, you should get started
with a project.</p>
<p>First off, you should use XCode to edit your code, at least to begin with,
even if you are accustomed to using another editor.  The reason is that XCode
is going to do a lot of things for you which will make your life easier and
reduce the complexity significantly as you get started.  Once you are
comfortable, you can move to another editor.</p>
<p>Some things that XCode will do for you:</p>
<ul>
<li><p><strong>Autocompletion</strong>: The best way to figure out the Cocoa APIs is to use the
autocompletion. This pops up when you want to override a method in a
subclass, create an object from an existing class, access an attribute of a
class, or instantiate a class or call a function (remember that Swift is
polymorphic, so it's useful to know all the possible ways to instantiate a
class or call a function).</p></li>
<li><p><strong>Compiler errors and warnings</strong>: Swift, being a strictly typed language,
will give you a lot of useful compiler errors. It's pretty hard to write a
program incorrectly from a type point of view, and have it even compile.
XCode integrates this nicely, and it even offers suggestions on how to fix
things every once in a while (so that you can just click the button and have
it fixed inline).</p></li>
<li><p><strong>Direct interaction with the iOS Simulator</strong>: One button will compile your code
and start the simulator. If your target is Mac OS X, it will open the
application.</p></li>
<li><p><strong>Debugger</strong>: Clicking to the left of a line will set a breakpoint in the
debugger.  The Swift debugger seems pretty limited right now. I wasn't able
to get any useful information out of the variables view when I used it.  But
in my experience using XCode in the past to debug C, its graphical debugger
is one of the best.</p></li>
<li><p><strong>Configuration settings</strong>: If you click on the XCode project in the files
view (the root node of all the files), you get a view with all the different
settings for your project. Most of these you probably won't want to change,
but a few are important, like what devices and orientations you want to
allow, what operating system versions you want to support, and the name and
version of your project.  Editing these outside of XCode requires editing an
XML file, which is no fun.</p></li>
</ul>
<p>Of course, any editor can potentially do these things, and I'm really looking
forward to the point where I can just use Emacs to edit Swift code, as the
XCode editor as an editor is quite annoying.  XCode was the editor that I used
before I switched to using Emacs, and it's not gotten much better. There are
still several visual glitches in the editor environment, especially with the
scope coloring and syntax highlighting. You can edit the keyboard shortcuts in
the XCode setting to get some things the way you like them (although I found
that trying to set TAB to autoindent did not work). You can also use a tool
like <a href="https://pqrs.org/osx/karabiner/">Karabiner</a> (previously
KeyRemap4MacBook) to enable Vim or Emacs editor shortcuts everywhere
(including XCode). It doesn't help that XCode 6 is still in beta (at some
point the editor backend died and all syntax highlighting and tab completion
stopped working; I managed to fix it by removing a spurious <code>!</code> in the code)</p>
<h2>The iOS Simulator</h2>
<p>One disappointing thing that I learned is that you cannot run any iOS program
you write on an iOS device unless you are in the paid developer program (or if
you Jailbreak and are willing to go through some hoops). The iOS developer
program costs $100 a year, and since I'm not sure yet how far I am going to go
with this, I am holding off on it.</p>
<p>The only other option then is to run on the simulator. The simulator is fine,
the only issue is that there are limits to how you can simulate a touch screen
on a computer with a mouse.</p>
<p>A few things to note about the simulator:</p>
<ul>
<li><p>There are several things you can do with the "hardware" from the hardware
menu, such as rotating the device or pressing the home button.</p></li>
<li><p>It's worth remembering the keyboard shortcut for pressing the home button,
⇧⌘H, as you can press it twice in quick succession just like on a real
device to open the task manger. You can then drag your app up to completely
reset it, without having to restart the simulator.</p></li>
<li><p>The retina iPad is taller than your display, even if you have a 15" retina
display. So be aware that you will need to scroll up and down to see it
all. Alternately, you can use a smaller device, like an iPhone, or rotate it
to landscape, where it all fits.</p></li>
<li><p>The only way to do multitouch is to hold down the Option key. This will
create two fingers.  However, it's quite limited as the two fingers are
always centered around the center of the screen. Therefore if you want to
test multitouching two objects, you'll have to position them symmetrically so
that you can grab them both.</p></li>
</ul>
<h2>Getting started with a project</h2>
<p>The best way to start is to start a template project with XCode. I personally
started with a SpriteKit game for iOS. This created a basic template "Hello
World" Swift file with the basic <code>SKScene</code> subclass. Go ahead and compile and
run this in the simulator to see what it does.</p>
<p>There are four important methods of <code>SKScene</code> which you will want to override,
<code>didMoveToView</code>, <code>touchesBegan</code>, <code>touchesEnded</code>, and <code>update</code>. <code>didMoveToView</code>
is the initializer for the scene.  Anything that should be set up and appear
from the very beginning should go there. <code>touchesBegan</code> and <code>touchesEnded</code> are
called when a finger touches the screen and when it leaves the screen,
respectively. Remember always that iOS devices are multitouch devices, so
these events can happen concurrently, and there can be multiple touches
happening at once.  The first argument to these methods is a set of touches,
which you should iterate over to perform actions (the "Hello World" example
shows how to do this). Finally, the <code>update</code> method is called every time the
scene is updated, at each "frame" essentially.</p>
<p>There are other methods, for instance, <code>touchesMoved</code>. However, I discovered
that you don't actually want to use <code>touchesMoved</code> to do what you would think
you'd use it for, namely, to move stuff around. The reason is that there is no
easy way to sync up multitouches between <code>touchesBegan</code> (where you know what
thing the finger started on) and <code>touchesMoved</code> to move it around. It works
well for a single touch, but if you want to be able to move multiple things
around at once (which I highly recommend, as it leads to a much nicer user
experience), you have to do things a little differently, as I'll explain
below.</p>
<h2>Adding some objects to your environment</h2>
<p>There are a lot of classes to create various objects of various shapes. I
started with <code>SKSpriteNode</code>, which creates a simple square, because I wanted
to play around with touch events.</p>
<p>I started out with four sprites (yes, it would be better to put these in an
array, and probably abstract them to a method):</p>
<pre><code class="language-swift">let sprite1 = SKSpriteNode(color: UIColor(red: 1.0, green: 0.0, blue: 0.0, alpha: 1.0), size: CGSize(width: 30, height: 30))
let sprite2 = SKSpriteNode(color: UIColor(red: 0.0, green: 1.0, blue: 0.0, alpha: 1.0), size: CGSize(width: 30, height: 30))
let sprite3 = SKSpriteNode(color: UIColor(red: 0.0, green: 0.0, blue: 1.0, alpha: 1.0), size: CGSize(width: 30, height: 30))
let sprite4 = SKSpriteNode(color: UIColor(red: 1.0, green: 1.0, blue: 0.0, alpha: 1.0), size: CGSize(width: 30, height: 30))
</code></pre>
<p>These lines go at the class level. This lets them be accessed from within any
method of the class.</p>
<p>One thing I could not figure out how to do was how to access class variables
from within other class variables.  In Python, you can do</p>
<pre><code class="language-py">class Test:
    a = 1
    b = a + 1
</code></pre>
<p>But in Swift, if you do</p>
<pre><code class="language-swift">class Test {
    let a = 1
    let b = a + 1
}
</code></pre>
<p>it tells you that <code>Test.Type does not have a member named 'a'</code> on the <code>let b = a + 1</code> line.</p>
<p>You may have to use properties with getters and setters in this case, which I
didn't feel like fooling with. The result is that I did not abstract out the
<code>CGSize(width: 30, height: 30)</code> into a common variable.</p>
<p>The <code>didMoveToView</code> method then becomes</p>
<pre><code class="language-swift">override func didMoveToView(view: SKView) {
    let center = CGPoint(x:CGRectGetMidX(self.frame), y:CGRectGetMidY(self.frame))

    for s in [sprite1, sprite2, sprite3, sprite4] {
        s.position = center

        self.addChild(s)
    }
}
</code></pre>
<p>The <code>self.addChild</code> is the most important method here, as it actually puts the
sprite in the main view. If you forget this line, none of the sprites will
show up.</p>
<p>If you run this, you will only see the yellow box, because you put them all on
top of one another in the center of the view.</p>
<p><img width="500" src="http://asmeurer.github.io/galleries/swift-game-1.png" /></p>
<h2>Adding Basic Physics</h2>
<p>We could change the positions so that they do not overlap, but the option I
went with was to play around with the physics a little. <code>SpriteKit</code> has a nice
2D physics engine built in, and it's quite easy to use.</p>
<p>So my final <code>didMoveToView</code> was</p>
<pre><code class="language-swift">override func didMoveToView(view: SKView) {
    /* Setup your scene here */
    let center = CGPoint(x:CGRectGetMidX(self.frame), y:CGRectGetMidY(self.frame))

    for s in [sprite1, sprite2, sprite3, sprite4] {
        s.position = center

        var physics_body = SKPhysicsBody(rectangleOfSize: CGSize(width: 30, height: 30))

        physics_body.affectedByGravity = false
        physics_body.allowsRotation = false

        s.physicsBody = physics_body
        self.addChild(s)
    }

}
</code></pre>
<p>For each sprite, I create an <code>SKPhysicsBody</code> with the exact same size as the
<code>SKSpriteNode</code>s (there's probably a more direct way to do this), and attach it
to that node. The <code>affectedByGravity</code> property is important. If you don't set
it to <code>false</code>, all the objects will fall off the bottom of the screen. I
disabled <code>allowsRotation</code> because I wanted my squares to stay
upright. Otherwise when when the squares hit one another they will rotate in
space.</p>
<p>Now <code>SceneKit</code> will prevent the squares from overlapping with one another, even
if we put them on top of each other as we have done.</p>
<p>So now when we start the simulator, we see</p>
<p><img width="500" src="http://asmeurer.github.io/galleries/swift-game-2.png" /></p>
<h2>Making the squares movable</h2>
<p>Now, let's make it so that we can move these squares around.  The correct way
to do this took me some time to figure out.  I finally got some hints from
<a href="http://eppz.eu/blog/spritekit-drag/">this site</a>.</p>
<p>The key thing here is that the <code>UITouch</code> objects remain the same objects for
the duration of the touch. Their position is updated when the touch
moves. Hence, you just need to associate each touch with the node that was
touched when the touch began, and move the node to the position of that touch
with each update.</p>
<p>To start, we will create a dictionary on the class mapping touches to nodes</p>
<pre><code class="language-swift">var selected: [UITouch: SKNode] = [:]
</code></pre>
<p>Then, in the <code>touchesBegan</code> method, map every touch to the node that it
touches.</p>
<pre><code class="language-swift">override func touchesBegan(touches: NSSet, withEvent event: UIEvent) {
    /* Called when a touch begins */

    selected = [:]
    for touch: AnyObject in touches {
        let location = touch.locationInNode(self)

        selected[touch as UITouch] = nodeAtPoint(location)

    }
}
</code></pre>
<p>The <code>as UITouch</code> part is needed because the compiler only knows that touch is
<code>AnyObject</code>. This was one of the things that was helpfully suggested by the
compiler, so I did not really need to know what I was doing to get it right.</p>
<p>Note that even if you touch the background behind the squares, you are still
touching a node, namely, the <code>GameScene</code> node itself (the node for the class
you are working on).  This is a very important observation, as it will tell us
how to get the right position for the node when we update it. It also means
that we should keep track of which nodes we actually want to be moved by the
touch. Trying to move the <code>GameScene</code> node is ignored, at leads to a lot of
console logs, so we should avoid it.</p>
<p>Next, let's write the <code>touchesEnded</code> method. This method is simple. If a touch
ends (the finger is removed from the screen), we should remove it from the
<code>selected</code> dictionary.</p>
<pre><code class="language-swift">override func touchesEnded(touches: NSSet, withEvent event: UIEvent) {
    for touch: AnyObject in touches {
    selected[touch as UITouch] = nil
    }
}
</code></pre>
<p>To delete an item from a dictionary in Swift, just set it to <code>nil</code>.</p>
<p>Now, finally, we need to write the <code>update</code> method to move the node to the
current position of the touch.</p>
<p>The simplest way to do this is</p>
<pre><code class="language-swift">override func update(currentTime: CFTimeInterval) {
    /* Called before each frame is rendered */
    for (touch, node) in selected {
        if !contains([sprite1, sprite2, sprite3, sprite4], node) {
            continue
        }
        let location = touch.locationInNode(self)
        node.position = location
    }
}
</code></pre>
<p>Note that we only modify the position for the four sprite nodes.</p>
<p>The <code>touch.locationInNode(self)</code> part took me a long time to figure out. There
are other methods, like <code>touch.locationInView(nil)</code>, but this does something
very strange where the the horizontal axis was doubled (moving the touch one
inch moved the object two inches), and the vertical axis was inverted. If
someone knows what was going on there, please let me know.</p>
<p>Modifying the position directly is nice, but it's nice to play around a little
bit with a third thing from SpriteKit, actions.</p>
<p>What we will do instead of setting the position of the node is to tell
SpriteKit to move the node there in a certain amount of time. If we make this
time small enough, like <code>0.01</code> seconds, it will appear to act exactly the
same. If we up this time, there will be a smooth "lag" where the node catches
up to the touch. Because the movement always happens in the same amount of
time, it will move faster if the finger is farther away. This gives the
squares a nice "frictioney" effect with some springiness to it, which is quite
nice.</p>
<pre><code class="language-swift">override func update(currentTime: CFTimeInterval) {
    /* Called before each frame is rendered */
    for (touch, node) in selected {
        if !contains([sprite1, sprite2, sprite3, sprite4], node) {
            continue
        }
        let location = touch.locationInNode(self)
        let action = SKAction.moveTo(location, duration: 0.1)
        node.runAction(SKAction.repeatAction(action, count: 1))
    }
}
</code></pre>
<p>There are many other actions we can perform, like rotations and color
changes.</p>
<h2>Conclusion</h2>
<p>Here is an example of the movement. You can see it works even with
multitouch.  You can also see the collision physics cause the other squares to
move out of the way when another square hits them.</p>
&lt;video autoplay="autoplay" loop="loop" src="http://asmeurer.github.io/SpriteKit-Example.mp4" width="500"&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
<p>Here you can see the movement lag caused by using <code>SKAction.moveTo</code> with
<code>duration: 0.1</code> (note that the mouse itself jumps a bit at the beginning, but
this is due to lag in the recording).</p>
&lt;video autoplay="autoplay" loop="loop" src="http://asmeurer.github.io/SpriteKit-Example-2.mp4" width="500"&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
<p>I have uploaded the full code to
<a href="https://github.com/asmeurer/GameTest/blob/blog/GameTest/GameScene.swift">GitHub</a>.</p>
<p>This isn't exactly a "game", but it does lay down the foundations for what you
would need to write a game in Swift using SpriteKit.  At least for me, it
shows me the technical basics of how to write some games that I had thought
about, which mostly involve making shapes and moving them around the screen.</p>











</div></div>







<p class="date">
<a href="http://asmeurer.github.io/posts/playing-with-swift-and-spritekit/">by Aaron Meurer at August 17, 2014 04:31 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 15, 2014</h2>

<div class="channelgroup">







<h3><a href="http://thilinaatsympy.wordpress.com" title="Thilina's SymPy Blog">Thilina Rathnayake</a></h3>


<div class="entrygroup" id="http://thilinaatsympy.wordpress.com/?p=391">
<h4 lang="en"><a href="http://thilinaatsympy.wordpress.com/2014/08/15/more-work-on-sparse-matrices/">More work on Sparse Matrices</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Hi All,</p>
<p>During this week I completed more functionalities regarding to CSR Matrices. I mainly implemented a generalized binary operation between two matrices. It’s similar to the SciPy function <a href="https://github.com/scipy/scipy/blob/master/scipy/sparse/sparsetools/csr.h#L745">csr_binop_csr_canonical</a>. This method applies a given binary function, <img src="http://s0.wp.com/latex.php?latex=binop&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="binop" class="latex" title="binop" /> to each corresponding elements of the two matrices which are given as input arguments, i.e. <img src="http://s0.wp.com/latex.php?latex=%28i%2C+j%29%5E%7Bth%7D&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="(i, j)^{th}" class="latex" title="(i, j)^{th}" /> entry of the output matrix is equal to <img src="http://s0.wp.com/latex.php?latex=binop%28a%2C+b%29&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="binop(a, b)" class="latex" title="binop(a, b)" /> where <img src="http://s0.wp.com/latex.php?latex=a&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="a" class="latex" title="a" /> and <img src="http://s0.wp.com/latex.php?latex=b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="b" class="latex" title="b" /> are the <img src="http://s0.wp.com/latex.php?latex=%28i%2C+j%29%5E%7Bth%7D&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="(i, j)^{th}" class="latex" title="(i, j)^{th}" /> entries of input matrices respectively.</p>
<p>Also, I implemented <img src="http://s0.wp.com/latex.php?latex=get%28%29%2C+set%28%29&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="get(), set()" class="latex" title="get(), set()" /> methods for CSRMatrix class. It took me while to get this completely right as I was discarding some of the possible cases.</p>
<p>I originally planned to start writing python wrappers but I couldn’t do it as I was a bit busy with a project in my university. But I hope to get started on this in upcoming week. Although the GSoC is officially over, I will work on the project for two additional weeks as I took a two weeks break during the programme.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/thilinaatsympy.wordpress.com/391/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/thilinaatsympy.wordpress.com/391/" alt="" border="0" /></a> <img src="http://pixel.wp.com/b.gif?host=thilinaatsympy.wordpress.com&amp;blog=52956410&amp;post=391&amp;subd=thilinaatsympy&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="http://thilinaatsympy.wordpress.com/2014/08/15/more-work-on-sparse-matrices/">by Thilina Rathnayake at August 15, 2014 01:49 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 12, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.s-d-b.com" title="SDB's Blog » SymPy">Soumya Dipta Biswas</a></h3>


<div class="entrygroup" id="http://blog.s-d-b.com/?p=107">
<h4 lang="en-US"><a href="http://blog.s-d-b.com/gsoc-2014-week-10-and-11/">GSoC 2014: Week 10 and 11</a></h4>
<div class="entry">
<div class="content" lang="en-US">
<p>Hello everyone,</p>
<p>This GSoC post has been long pending, but to be honest the last two weeks have been simply been so hectic that I haven’t managed to find the time to write a lot of code, or blog about it. One of the major things I have worked on is greatly improving the resolution code I wrote earlier. This revision fixes a small bug and greatly improves the speed of the resolution process. Initially if a clause was not entailed by the KB, then it took almost forever for the method to return False. In the scenario where it was entailed, it was still performing lots of useless computations. This has been completely removed from the new resolution, and the method quite efficiently gives the correct value. The other major task has been to fully integrate the Constants class. Now, any non-boolean object that will internally get converted to a Constant and the user can be simply put in strings and numbers and the system will still play nice with it. Except for this, I have finished allSAT (all models for a given formula). I will be sending out a PR for this as soon as I finish testing it properly. I think that is all for now.</p>
<p>Bye!!!</p></div>







<p class="date">
<a href="http://blog.s-d-b.com/gsoc-2014-week-10-and-11/">by SD at August 12, 2014 03:09 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 11, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.sudhanshumishra.in/search/label/sympy" title="Shortlog">Sudhanshu Mishra(Old)</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-8847459392628952171.post-2016507761870075517">
<h4><a href="http://blog.sudhanshumishra.in/2014/08/gsoc14-progress-week-12.html">GSoC'14 progress: Week 12</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><br /><div style="text-align: left;" dir="ltr"><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Last week I worked on utility functions which has been merged into the master.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Currently I am working on converting my incopmlete PR related to geometrical optics in 3D into 2D. Creating these classes in 3D will make it difficult to use/extend. I referred to some books and I never saw use of too much 3D in their illustrations. Depending on the use cases we can consider adding it later after gsoc. As of now optics module can not be called complete and hence I'll be working on it post gsoc.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Few other things which I would like to complete this week are as follows:</div><ul style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin: 0px 0px 9px 25px; padding: 0px;"><li style="">Interference</li><li style="">Diffraction</li><li style="">IPython notebooks for examples</li></ul></div></div></div>







<p class="date">
<a href="http://blog.sudhanshumishra.in/2014/08/gsoc14-progress-week-12.html">by Sudhanshu Mishra (noreply@blogger.com) at August 11, 2014 11:27 AM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://thilinaatsympy.wordpress.com" title="Thilina's SymPy Blog">Thilina Rathnayake</a></h3>


<div class="entrygroup" id="http://thilinaatsympy.wordpress.com/?p=386">
<h4 lang="en"><a href="http://thilinaatsympy.wordpress.com/2014/08/11/sparse-matrices/">Sparse Matrices</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Hi All,</p>
<p>I am writing a blog post for GSoC after three weeks. I couldn’t work on the project for two weeks as I participated in a competition. However I am back again and started working again. Now, I am mainly concerned about finishing my work with Sparse Matrices. Then we can write some wrappers and do some benchmarks.</p>
<p>We decided to use SciPy’s sparse matrices code and I have ported most of the important functionalities. I created a <a href="http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix">CSRMatrix</a> class and created a method to create a CSRMatrix from a normal COO matrix. I ported the methods for testing the canonical form and sparse matrix multiplication.  Also, I implemented three methods mainly to be used in extracting diagonal elements and scaling.</p>
<p>I am going to implement binary operations with CSR matrices during the coming week and also want to get started with writing wrappers so we can use the Matrix classes from python and SymPy.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/thilinaatsympy.wordpress.com/386/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/thilinaatsympy.wordpress.com/386/" alt="" border="0" /></a> <img src="http://pixel.wp.com/b.gif?host=thilinaatsympy.wordpress.com&amp;blog=52956410&amp;post=386&amp;subd=thilinaatsympy&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="http://thilinaatsympy.wordpress.com/2014/08/11/sparse-matrices/">by Thilina Rathnayake at August 11, 2014 08:08 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 10, 2014</h2>

<div class="channelgroup">







<h3><a href="https://hargup.github.io/" title="Harsh's blog">Harsh Gupta</a></h3>


<div class="entrygroup" id="https://hargup.github.io/posts/week-11.html">
<h4 lang="en"><a href="https://hargup.github.io/posts/week-11.html">Week 11 and Week 12: Wrapping up the project</a></h4>
<div class="entry">
<div class="content">
<p>The GSoC is about to end. We have the suggested deadline tomorrow and the firm
deadline next week. We are wrapping up the project now, cleaning up the code,
writing the documentation and turning the project into a usable state.
Since the new solvers cannot be called compelete I have to make sure that the
next person working on it can pick it up easily. I plan come up with a post with
the summary of the work that was done, that challenges we faced and thing that
needs to done and how can they be tackled.</p></div>







<p class="date">
<a href="https://hargup.github.io/posts/week-11.html">by Harsh Gupta at August 10, 2014 12:09 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://kundankumar185.wordpress.com" title="my experiments with life">Kundan Kumar</a></h3>


<div class="entrygroup" id="http://kundankumar185.wordpress.com/2014/08/10/gsoc-week-11-12-concluding-ideas/">
<h4 lang="en"><a href="https://kundankumar185.wordpress.com/2014/08/10/gsoc-week-11-12-concluding-ideas/">GSoC week 11-12: Concluding Ideas</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Phew, that was close I just had full week of written tests by recruiting companies. Well, not good for me. I suck at electrical and that too when we have to study ancient electrical subjects which has no longer any use in this modernized world. My college, maybe all Indian colleges, lag behind in electrical subjects. Though I always find online courses of electrical in U.S colleges fascinating, Oh but I am in India, can’t help with it. Let’s see how good I will do in GRE and TOEFL, maybe after getting in better colleges I will get to discover more.</p>
<p>Oh, I got driven by emotions, this is my GSoC blog so I will start with concluding my work I have done till now. Well before I conclude I will admit I wasn’t doing much work from last few days. In my 10th and 11th week I just had my checksysodesol <a href="https://github.com/sympy/sympy/pull/7746">PR</a> merged. And two PRs for <a href="https://github.com/sympy/sympy/pull/7831">doc</a> and <a href="https://github.com/sympy/sympy/pull/7703">nonlinear</a> one are still behind. In the beginning of next week I will complete that and get it merged. This week I started the doc PR to complete all documentation and will add few tests to make coverage_report of ode to increase which is 85% now. I will discuss on nonlinear one with Sean and Tim about what modification is required.</p>
<p>My work in GSoC is on system of ODEs. In this I included linear system of ODEs for first order of two, three and `n` equations and second order of two and three equations and non-linear system of ODEs for first order of two and three equations. In order to solve these I modified `dsolve` function to incorporate solving these equations, made a new function `classify_sysode` to classify these system of ODEs and also made a function `checksysodesol` to check for solutions by substituting those solutions in equations and simplifying to get zero.</p>
<p>As this will be the last official blog for GSoC, as Aaron mailed, I would like to say few things here, offcourse we will be on gitter. This is the best experience of work I had in life. Well working continuously without having any care of anything else, it just feels awesome. I learned a lots and lots of stuffs from Sean, Tim, Aaron, Smith, Ondrej and some from Harsh and Sudhanshu too. I just started working on Sympy from 27 Feb, that was too late <span class="wp-smiley wp-emoji wp-emoji-smile" title=":)">:)</span>, and then I didn’t knew git, github, opensource and many more things, just knew continuously working hard just pave the way to success but not without you guys. Open source is a great place to learn new stuffs and even better due to interaction with lots of people from other places. I will always be contributing to open source. It has lot of free software which otherwise would have to hard to buy in college life. This is going to my most memorable summer.</p>
<p>Thanks you guys!</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/kundankumar185.wordpress.com/127/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/kundankumar185.wordpress.com/127/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=kundankumar185.wordpress.com&amp;blog=68025302&amp;post=127&amp;subd=kundankumar185&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://kundankumar185.wordpress.com/2014/08/10/gsoc-week-11-12-concluding-ideas/">by Kundan at August 10, 2014 06:40 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 03, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-31986856554930244">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">I returned to my college last week. I couldn't do much for a few days as a result. Also a late blog as a consequence.<br /><br />I tried solving the bugs presented in my 3 PR's. <br /><br />In the formal_series PR,<br />I implemented the necessary `_eval_` methods<br />- _eval_derivative<br />- _eval_integral<br />- _eval_as_leading_term<br />- as_ordered_terms<br />There is still the problem in test_args which fails because args of Stream class is not a Basic instance. It is a generator object.<br />I also added more test cases.<br /><br />In the special asympt PR,<br />I have a few bugs which I'm not been able to solve.<br />Suppose _eval_nseries returns expansion of the form:-<br />s = (1 + 1/x + 1/x**2 + ... O(1/x**6, (x, oo)))*(exp(-x)/x) then it fails.<br />getO fails on s as it is not an Add instance. Then it tried to append it with appropriate Order term, so<br />s + O(1/x**n, (x, oo)) = O(1/x**n, (x, oo)) which is wrong.<br /><br />I'll try fixing all these bugs in the last few days and get all the PRs ready for merge.<br /> </div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/08/i-returned-to-my-college-last-week.html">by Avichal Dayal (noreply@blogger.com) at August 03, 2014 08:03 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>August 02, 2014</h2>

<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/2014/08/03/gsoc-week-11-a-major-bug-fix-and-printing/">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/08/03/gsoc-week-11-a-major-bug-fix-and-printing/">GSoC Week 11: A major bug fix, and printing</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Jim brought my attention to a very crucial bug in my work this week. Well, SymPy now automatically detects folders to test by looking at the <code>__init__.py</code> files. That is, a given folder in the SymPy code directory would _only_ be tested if it has <code>__init__.py</code>. Since I hadn’t put any such file in _sympy/vector/tests_, they were being skipped till now! Thank God this got fixed.</p>
<p>I started out this week with the seemingly ‘easy’ task of implementing different kinds of printing functionalities for sympy.vector. Well, the basic methodology of doing things is pretty simple, if you just follow the documentation in the _sympy.printing.printer_ file. It will tell you all you need to know about – either implementing a new printer, or adding custom code for printing of your class (to an existing printer).</p>
<p>Some things I had to improve/word around-</p>
<p>1. BaseScalars had to be handled differently from BaseVectors, since BaseScalars are a part of other Exprs (that may be measure numbers in vectorial expressions), and they have their own dedicated printing methods. Hence, I had to implement the <code>_latex</code> and <code>_pretty</code> methods in BaseScalar itself.</p>
<p>2. The pretty _as well as_ latex printing for _both_ Vectors and Dyadics with a single <code>_print_BasisDependent</code> method in the respective printers.</p>
<p>3. I used the printing code in _sympy.physics.vector_ as reference, though quite a few things had to be changed keeping in mind the inheritance from Expr, the structure and nature of the args being different, etc.<br /> I did improve on a few things. _physics.vector_’s pretty printing messes up when dealing with vectors whose measure numbers have varying ‘heights’.</p>
<p>Overall, it was quite a learning experience and tricky coding – to implement printing, compared to my initial impression of it being a boring and tedious job.</p>
<p>Well, I have implemented all the requried methods and tests (all of which pass). I have pushed them to my third GSoC PR, so thats in line. Hopefully, the dyadics PR will soon show all tests passing, after which Jason or I will get it merged. It will add the OOP structure, and the dyadic code, as well as fix some crucial bugs.</p>
<p>A demo of the new printing implementations for a tedious vector expression-</p>
<p>Assume N is a <code>CoordSysCartesian</code> instance. Then,<br /> <code>(a**2 + b)*N.i + (Integral(f(b)))*N.k</code> pretty-prints as</p>
<p><code><br /> u'\u239b 2 \u239e N_i + \u239b\u2320 \u239e N_k\n\u239da + b\u23a0 \u239c\u23ae f(b) db\u239f \n \u239d\u2321 \u23a0 '<br /> </code></p>
<p>and LaTeX-prints as-</p>
<p><code><br /> (a^{2} + b)\mathbf{\hat{i}_{N}} + (\int f{\left (b \right )}\, db)\mathbf{\hat{k}_{N}}<br /> </code></p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/25/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/25/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=25&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/08/03/gsoc-week-11-a-major-bug-fix-and-printing/">by srjoglekar246 at August 02, 2014 09:35 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://geekpy.blogspot.com/" title="Akshay Narasimha">Akshay Narasimha</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-54146973659574488.post-8171418961117224700">
<h4><a href="http://geekpy.blogspot.com/2014/08/gsoc-week-10-11.html">Gsoc Week 10-11</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div><div>I could not post last week as my college started and I had to travel a bit. I did not do much work last week as per my proposal's schedule but ended up spending a lot of time refactoring the code base of the Geometry module(my work and the existing code). Here are some links to the PR's reflecting these changes.</div></div><ul style="text-align: left;"><li><a href="https://github.com/sympy/sympy/pull/7760">7760</a></li><li><a href="https://github.com/sympy/sympy/pull/7733">7773</a></li><li><a href="https://github.com/sympy/sympy/pull/7813">7813</a></li></ul><div><div>Apart from that I added a few methods to the Parabola class which is almost complete apart from the tests. I will add those up this weekend and send a commit.<br /><br />The following week I plan to work on the GeometryResult class and will try to get the pending PR's merged.<br /><br />That's all for now, Until then cheers!</div></div></div></div>







<p class="date">
<a href="http://geekpy.blogspot.com/2014/08/gsoc-week-10-11.html">by Akshay Narasimha (noreply@blogger.com) at August 02, 2014 05:47 AM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://jcrist.github.io/" title="Marginally Stable">Jim Crist</a></h3>


<div class="entrygroup" id="tag:,2014-08-01:gsoc-week-10-11.html">
<h4><a href="http://jcrist.github.io/gsoc-week-10-11.html">GSoC Week 10 &amp; 11: Bogged down in details</a></h4>
<div class="entry">
<div class="content">
<p>I missed my post last week due to my research for grad school all going to hell
at the worst possible time :(. There wasn't much to report on last week, so I'm
not too perturbed. Turns out even with PRs done and tested, it still takes a
long time to get them merged and have everyone agree on them. Fortunately I
made up for it this week; as of now I am officially working on code generation!
This is behind schedule on my original timeline, but should have been expected,
as per <a href="http://en.wikipedia.org/wiki/Hofstadter%27s_law">Hofstadter's law</a>:</p>
<blockquote>
<p><strong>Hofstadter's Law:</strong> "It always takes longer than you expect, even when you
take into account Hofstadter's Law."</p>
</blockquote>
<p>Things are moving ahead now, and I have some hope left that I can accomplish
(most of) everything I set out to do.</p>
<h2>Project Status:</h2>
<p>I set out to accomplish a number of things this summer. Here's the status of
each project goal:</p>
<ul>
<li>
<p><strong>General Linearization Form:</strong></p>
<p>Done!</p>
</li>
<li>
<p><strong>Linearization methods for Kane's and Lagrange's Methods:</strong></p>
<p>Done! Lagrange stuff got merged last week.</p>
</li>
<li>
<p><strong>Documentation for the above:</strong></p>
<p>Done? This PR is waiting for review, but I think it's good.</p>
</li>
<li>
<p><strong>Pre-linearized solution methods:</strong></p>
<p>Nixed from the plan due to lack of interest.</p>
</li>
<li>
<p><strong>Code Generation:</strong></p>
<p>In Progress...</p>
</li>
</ul>
<p>I also accomplished a few other things, that I found necessary for my project:</p>
<ul>
<li>
<p><strong>Refactored <code>KanesMethod</code> and <code>LagrangesMethod</code>:</strong></p>
<p>This resulted in more readable, pythonic code, and also a speed/memory
improvement. PR for this is still awaiting review.</p>
</li>
<li>
<p><strong>Faster <code>subs</code> function for <code>mechanics</code>:</strong></p>
<p>My <code>msubs</code> implementation is several orders of magnitude faster than <code>subs</code>
for the kinds of expressions seen in <code>mechanics</code> (even without the benefit
of cacheing that <code>subs</code> has). This is in a PR awaiting review.</p>
</li>
<li>
<p><strong>Soooo much work on the <code>nan</code> and <code>oo</code> issue:</strong></p>
<p>Still not solved for <em>all</em> cases... :(</p>
</li>
</ul>
<h2>TODO:</h2>
<p>There are only 3 weeks left of GSoC! In my last remaining weeks, here's what I
plan to get done:</p>
<ul>
<li>
<p><strong>Get the Bicycle Example working:</strong></p>
<p>After my work everything runs faster, results in smaller, more tractable
expressions, and uses less memory. Except for the bicycle example. For some
unknown reason I can not get this thing to result in anything except <code>nan</code>.
This is a regress in performance (even though everything else runs better),
and needs to be solved.</p>
</li>
<li>
<p><strong>Code generation:</strong></p>
<p>I've already got some stuff working, and it's really exciting. More on this
below.</p>
</li>
<li>
<p><strong>Get all my current stuff merged:</strong></p>
<p>All that works needs to get into <code>Sympy</code>. As not everyone else is being paid
to do this, it can take some time and effort to get things through the
review process and into master, but I have hope that my remaining
contributions will eventually make it in.</p>
</li>
</ul>
<p>I think I can do it, but it'll be a stretch.</p>
<h2>Code Generation</h2>
<p>Sympy currently contains some facilities for code generation, but they lack
support for the matrices that are necessary for working with dynamics problems.
I hope to remedy that, as well as to make general improvements to the entire
codegen module.</p>
<p>Code generation in sympy has three levels:</p>
<ol>
<li>
<p><strong>Code Printers <code>ccode</code>, <code>fcode</code>, and the like</strong></p>
<p>These are printers that know how to print <em>simple</em> sympy expressions using
functionality and syntax found in that language. For example, <code>ccode</code> will
print exponents using <code>pow</code>, which is found in the <code>math</code> library in C.
These printers don't have any knowledge of functions, multiple statements,
or header files. They simply print a single expression out on one line.</p>
</li>
<li>
<p><strong>The <code>codegen</code> submodule</strong></p>
<p>This submodule contains facilities for representing generalized <em>routines</em>,
and generating functions in various languages (currently C and FORTRAN)
that can be compiled as a library without any changes. They know about 
function and variable declarations, header files, library imports, and
multi-line statements. However, they have no idea how to make this
generated code work with python.</p>
</li>
<li>
<p><strong>Code wrapping, usually accessed through <code>autowrap</code></strong></p>
<p>This is where the functionality for <em>wrapping</em> the generated code lives.
Using the functionality provided here, one can compile and wrap generated
code, and then call it from python. The <code>autowrap</code> function is the main
entry point, allowing for all 3 steps to be done in one call.</p>
</li>
</ol>
<p>The first thing I wanted to fix was getting code generation to work with
matrices and matrix expressions. This turned out to be harder (and more
confusing) than I expected. There is currently support for a "matrix like"
object named <code>sympy.tensor.IndexedBase</code>, but I really don't understand the
purpose behind it. Reading through the code and examples though it seems to be
for representing indexed loop operations in a concise form. This unfortunately
has nothing to do with the indexed types (matrices) that I plan on
implementing.</p>
<p>I spent a long time reading through the code and playing around with it using
pdb trying to figure out the control flow in the codegen function, and am still
a little lost. Most of what's there seems to be for supporting the <code>Indexed</code>
operations.  After some time trying to bend them to work for matrices, I
changed plans and now am supporting <code>Matrix</code> and <code>MatrixExpr</code> types for matrix
operations only.  <code>Indexed</code> types can be used elsewhere, but they shouldn't be
used for representing matrices with expressions inside them.</p>
<p>I currently have this "working", but am not happy with it yet. The current
layout of the module made for some hacky work adding in matrix support. I plan
on doing some refactoring to make this implementation cleaner. Currently, on
my codegen branch the following is supported:</p>
<ul>
<li>
<p><strong>Generating C code for a matrix with expressions in each element:</strong></p>
<p>Matrices are set as input-output type arguments, and are modified in place
before being returned.</p>
</li>
<li>
<p><strong>Passing in a <code>MatrixSymbol</code> as an argument:</strong> </p>
<p>Here the plan is to use matrices to pass in a large number of arguments.
You can think of this kind of like a vector. There's another symbolic
vector type as well in Sympy (<code>DeferredVector</code>). I may end up supporting
it, but I'm not really sure what it's for. In its current implementation,
the following works:</p>
<div class="highlight"><pre><span class="n">q</span> <span class="o">=</span> <span class="p">[</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">,</span> <span class="n">q3</span><span class="p">,</span> <span class="n">q4</span><span class="p">,</span> <span class="n">q5</span><span class="p">]</span>
<span class="n">q_vec</span> <span class="o">=</span> <span class="n">MatrixSymbol</span><span class="p">(</span><span class="s">'q'</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sub_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">q_vec</span><span class="p">))</span>
<span class="c"># Replaces each q with elements from q_vec</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">msubs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">q_vec</span><span class="p">)</span>
<span class="c"># Generate a function that takes a numpy array (q) and returns expr</span>
<span class="c"># This works if expr is an expression, or a matrix</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">autowrap</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<p>After I clean this up, I plan to add support for:</p>
<ul>
<li>
<p><strong>Common Subexpression Elimination (cse):</strong></p>
<p>Even though modern compilers do this already, experimentation shows that
the large expressions generated in <code>mechanics</code> benefit from generated code
having cse performed. This will be implemented as a boolean kwarg (default
False).  When True, sympy's <code>cse</code> function will be run on the expression,
and the code for each subexpression will be generated, followed by the
final expression.  I actually don't think this will be too difficult to
implement, and should give some speed improvements on the compiled code (at
the cost of slower generation).</p>
</li>
<li>
<p><strong>A <code>ctypes</code> code-wrapper:</strong></p>
<p>Currently the only code wrappers supported are <code>f2py</code> and <code>cython</code>, neither
of which is in the standard library. While the wrappers generated with those
functions may be more robust, a ctypes wrapper is also possible, with the
added benefit that <code>ctypes</code> is in the standard lib.</p>
</li>
<li>
<p><strong>Support for matrix expressions:</strong></p>
<p>In an ideal world, I'd implement the excellent work done by Matthew
Rocklin, discussed in <a href="http://pyvideo.org/video/2028/matrix-expressions-and-blaslapack-scipy-2013-pr">this video from SciPy
2013</a>.
The idea here is that we have some knowledge about each of the matrices
involved in an <em>expression</em> (for example $A^{-1} B$). We may know that A is
positive definite, or symmetric, or upper triangular, etc... For each case,
there may be a faster inversion routine that we could take advantage of
rather than using a one-size-fits-all inverse function. As I don't have time
to implement support for all possible operations, and the many BLAS/LAPACK
routines that support them, I'll focus just on the inverse, as it's commonly
found in expressions in <code>mechanics</code>. The thought is, we should be able to
run:</p>
<div class="highlight"><pre><span class="n">func</span> <span class="o">=</span> <span class="n">autowrap</span><span class="p">(</span><span class="n">Inverse</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="o">*</span><span class="n">F</span><span class="p">)</span>
</pre></div>


<p>And have code generated that solves the expression in a fast manner, without
having to symbolically find the inverse of <code>M</code> and combine it with <code>F</code> into
one matrix beforehand.</p>
</li>
</ul>
<p>Of course this is a wishlist, and it's unlikely all of this will be accomplished
in the next 3 weeks. Still, I plan to keep supporting <code>sympy</code> after my GSoC
ends, so if it's not done by then it will eventually get there.</p>
<hr />
<h3>Other exciting news of the week:</h3>
<p>I got accepted to the GSoC reunion at the end of October! As this is the 10th
annual GSoC, Google is throwing a big reunion shindig for past and present
students. As there are lots of us, only a few were chosen based on a lottery,
and I made it through! I'm very excited to meet other students that completed
the program, listen to some interesting talks, and see the GooglePlex. I also
bought my tickets to get there a day early so I have some time to explore the
bay area. Last time I was out there I was 14, and I didn't get to see much
of the area. If you also got accepted/live out and would be interested in
meeting up, let me know! I'll be in San Jose/San Francisco October 23-26.</p></div>







<p class="date">
<a href="http://jcrist.github.io/gsoc-week-10-11.html">by Jim Crist at August 02, 2014 01:44 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 29, 2014</h2>

<div class="channelgroup">







<h3><a href="http://tarzzz.github.io/gsoc14" title="Tarun Gaba's blog - GSoC">Tarun Gaba</a></h3>


<div class="entrygroup" id="http://tarzzz.github.io/gsoc14/first-week.html">
<h4><a href="http://tarzzz.github.io/gsoc14/first-week.html">GSoC 14: First Week!</a></h4>
<div class="entry">
<div class="content">
{% include JB/setup %}


[ &lt;-Back to posts ](/gsoc14)

First week of GSoC 14 has ended. It has been a week full of discussions and brainstorming over how to 
handle the project, and the collaboration. Most of the time was spent in taking crucial design decisions

As decided, I will be publishing these weekly blog posts in A.O.I format(_Accomplishments_, _Objectives_ and _Issues_)

###Accomplishments:

The main accomplishments of this week involved finalizing a stable API for the generic visualizer. Discussions were held
with Adam and it was decided that a fork of MGView will be used for developing the new visualizer. It will have a 
UI look similar to MGView, but with additional features pertaining to PyDy and related enhancements as well.

Apart from that another main aim was to flesh out an API for the visualizer. The generic visualizer will be made up
of following modules:

  - Parser Module: to parse the JSON and save it in JS objects/variables

  - SceneGenerator Module: To take the relevant data and information from parsed JSON and create a scene on the canvas.

  - SceneEditor Module: Using GUI controls to edit the scene and save them in a JSON file.

  - ParamsEditor Module: Using GUI widgets to modify the simulation parameters, and send/save them as relevant.


###Objectives:

The objectives of the upcoming week are:

 - To develop the Parser Module to be able to consume JSON from both PyDy and MG and parse them into
   relevant Javascript objects.

 - To develop methods on PyDy side to generate the JSON in the form that MotionView can consume.

 - To test some benchmark examples to check this workflow: output from PyDy --&gt; JSON --&gt; consumed by Parser Module.


###Issues:

 Since actual coding work is not started yet!, there are no technical issues encountered so far.



I will keep this blog updated with the regular advancements in the project.



Happy Coding!


[ &lt;-Back to posts ](/gsoc14)</div>







<p class="date">
<a href="http://tarzzz.github.io/gsoc14/first-week.html">July 29, 2014 04:00 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://hargup.github.io/" title="Harsh's blog">Harsh Gupta</a></h3>


<div class="entrygroup" id="https://hargup.github.io/posts/week-10.html">
<h4 lang="en"><a href="https://hargup.github.io/posts/week-10.html">week 10: Radical equations</a></h4>
<div class="entry">
<div class="content">
<p>This week I worked on the solvers for the equations with radicals.
Suppose you have to solve</p>
<p>$$ \sqrt{x} + x - 2 = 0 $$.</p>
<p>then you have to move the radical to the right hand side of the equation.</p>
<p>$$ x - 2 = - \sqrt{x} $$</p>
<p>and then square at both sides</p>
<p>$$ x^2 - 4x + 4 = x $$</p>
<p>Now the equation is a polynomial in \( x \) can be solved with usual
polynomial solving methods. Note that squaring both sides produce some extra
solutions and we will have to check all the solutions obtained against the
original equation.  If there are more than one radicals involved we may
have to apply the method recursively. For example in solving
\( \sqrt{2x + 9} - \sqrt{x + 1} - \sqrt{x + 4} = 0 \)
the method will recurse twice.</p>
<p>To implement the method I tried a pattern matching approach.
The
squaring part is easy the tricky part is identifying which part to move to
the right hand side. First I tried to match the expression with the form
<code>sqrt(p) + q</code> but it failed even for case like <code>4*sqrt(x) + x - 2</code> because no
pattern matched to it. I had to use <code>a*sqrt(p) + q</code> with the condition that the
expression matched to a shouldn't be zero. Now I can simply move the expression
matched with <code>p</code> and terms multiplicated with it to the RHS and square both
the sides.</p>
<p>Notice that this method for solving sqrt equation can work with any radical
equation, if it were cube root instead of sqrt I just had to cube both the
sides. OK so how do I mathch that expression? I tried to pattern matching with
assumptions on the wild symbols but it doesn't work.  I tried to match with
somthing like <code>a*p**Rational(1, m) + q</code> but this also didn't work out because
Rational(1, m) raises TypeError no matter what the assumption on the variable
are.  There is a proposal for a new pattern matcher, I have not closely checked
the details but it will be able to work with assumption. You can see the
proposal on the wiki
<a href="https://github.com/sympy/sympy/wiki/Proposal-for-a-new-pattern-matching">here</a>
and if it is implemented then things will be good but I can't wait for it.
I had no other option to check term by term for rational power. Here's the
implementation</p>
<pre class="code literal-block"><span class="n">def</span> <span class="n">_has_rational_power</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">:</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">Wild</span><span class="p">(</span><span class="sc">'a'</span><span class="p">),</span> <span class="n">Wild</span><span class="p">(</span><span class="sc">'p'</span><span class="p">),</span> <span class="n">Wild</span><span class="p">(</span><span class="sc">'q'</span><span class="p">)</span>
    <span class="n">pattern_match</span> <span class="o">=</span> <span class="n">expr</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">p</span><span class="o">**</span><span class="n">q</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pattern_match</span> <span class="n">is</span> <span class="n">None</span> <span class="n">or</span> <span class="n">pattern_match</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="n">is</span> <span class="n">S</span><span class="p">.</span><span class="n">Zero</span><span class="o">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">False</span><span class="p">,</span> <span class="n">None</span><span class="p">)</span>
    <span class="n">elif</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">pattern_match</span><span class="p">[</span><span class="n">q</span><span class="p">],</span> <span class="n">Rational</span><span class="p">)</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">not</span> <span class="n">pattern_match</span><span class="p">[</span><span class="n">q</span><span class="p">].</span><span class="n">q</span> <span class="o">==</span> <span class="n">S</span><span class="p">.</span><span class="n">One</span><span class="o">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">True</span><span class="p">,</span> <span class="n">pattern_match</span><span class="p">[</span><span class="n">q</span><span class="p">].</span><span class="n">q</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">not</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">pattern_match</span><span class="p">[</span><span class="n">a</span><span class="p">],</span> <span class="n">Pow</span><span class="p">)</span> <span class="n">or</span> <span class="n">isinstance</span><span class="p">(</span><span class="n">pattern_match</span><span class="p">[</span><span class="n">a</span><span class="p">],</span> <span class="n">Mul</span><span class="p">)</span><span class="o">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">False</span><span class="p">,</span> <span class="n">None</span><span class="p">)</span>
    <span class="nl">else:</span>
        <span class="k">return</span> <span class="n">_has_rational_power</span><span class="p">(</span><span class="n">pattern_match</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
</pre></div>







<p class="date">
<a href="https://hargup.github.io/posts/week-10.html">by Harsh Gupta at July 29, 2014 12:09 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 28, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.sudhanshumishra.in/search/label/sympy" title="Shortlog">Sudhanshu Mishra(Old)</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-8847459392628952171.post-4950031512117145558">
<h4><a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-week-10-adding-more-to-utils.html">GSoC'14 Week 10: Adding more to utils</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">This week I worked on adding more utility function in optics. Some of them are yet to be added. I'll send a pull request once I write tests for them.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Here's the link to the code pushed till now:</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;"><a style="color: blue;" href="https://github.com/debugger22/sympy/compare/util-funcs">https://github.com/debugger22/sympy/compare/util-funcs</a></div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I also worked on one of my pending PR(<a style="color: blue;" href="https://github.com/sympy/sympy/pull/7686">https://github.com/sympy/sympy/pull/7686</a>) parameterizing a 3D circle. This will make the implementation a bit easier.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Tomorrow I'll be going back to college.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">That's all for now. Cheers!</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;"><br /></div></div></div>







<p class="date">
<a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-week-10-adding-more-to-utils.html">by Sudhanshu Mishra (noreply@blogger.com) at July 28, 2014 09:05 AM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/2014/07/28/gsoc-week-10-polishing-off-the-main-vector-framework/">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/07/28/gsoc-week-10-polishing-off-the-main-vector-framework/">GSoC Week 10: Polishing off the main vector framework</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>This was a tiring week, with me being sick with a bad case of sinus for 3 days. Phew. Even then, I did manage to get quite a bit of work done in the time I could manage to sit in front of the computer without getting a headache.<br /> Some main points of progress –</p>
<p>1. I finished off the Orienter classes, with a nice OO-structure, along with docs and tests. I basically changed the API of the <code>orient_new</code></p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/23/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/23/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=23&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/07/28/gsoc-week-10-polishing-off-the-main-vector-framework/">by srjoglekar246 at July 28, 2014 07:25 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 27, 2014</h2>

<div class="channelgroup">







<h3><a href="https://kundankumar185.wordpress.com" title="my experiments with life">Kundan Kumar</a></h3>


<div class="entrygroup" id="http://kundankumar185.wordpress.com/2014/07/27/week-10-test-cases-in-checksysodesol/">
<h4 lang="en"><a href="https://kundankumar185.wordpress.com/2014/07/27/week-10-test-cases-in-checksysodesol/">Week 10: Test cases in checksysodesol</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>I am finally in college, going through a long journey from home. Its final year for me now, got a very tight schedule.</p>
<p>I have updated the checksysodesol with test cases. The test cases includes the equations from first and second order linear and non-linear system of ODEs. I debugged few methods of system of ODEs, find out through checksysodesol.</p>
<p>The updated <em>func</em> method <a href="https://github.com/sympy/sympy/pull/7738">PR</a> is merged which closes issues <a href="https://github.com/sympy/sympy/issues/7736">#7736</a> and <a href="https://github.com/sympy/sympy/issues/7723">#7723</a>. The <a href="https://github.com/sympy/sympy/pull/7703">PR</a> of non-linear of system of ODEs and <a href="https://github.com/sympy/sympy/pull/7746">PR</a> of checksysodesol is open.</p>
<p>Today I will add all the test cases in checksysodesol and start a PR for non-linear system of ODEs of 2nd order.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/kundankumar185.wordpress.com/124/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/kundankumar185.wordpress.com/124/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=kundankumar185.wordpress.com&amp;blog=68025302&amp;post=124&amp;subd=kundankumar185&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://kundankumar185.wordpress.com/2014/07/27/week-10-test-cases-in-checksysodesol/">by Kundan at July 27, 2014 08:06 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 25, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.s-d-b.com" title="SDB's Blog » SymPy">Soumya Dipta Biswas</a></h3>


<div class="entrygroup" id="http://blog.s-d-b.com/?p=103">
<h4 lang="en-US"><a href="http://blog.s-d-b.com/gsoc-2014-week-9/">GSoC 2014: Week 9</a></h4>
<div class="entry">
<div class="content" lang="en-US">
<p>Hello Everyone,</p>
<p>I finished up the changes remaining in FOL and will send in the almost final pull request this week. This was only a minor part of the week however. Before jumping on to the implementation of faster SAT, I wanted to revisit faster CNF conversion. I have tweaked things further, but it still seems like very close to CNF turns out to be quite slow. If I can’t imporove the situation any further I will post the changes I made to Tseitin. Except fo that, I worked on tweaking the parameters of SAT, basically EVSIDS, without making any actual code changes. I will be posting the results of the same later.</p>
<p>Thats all for now. Hopefully this weekend will be quite productive.</p>
<p>See ya all later!!!</p></div>







<p class="date">
<a href="http://blog.s-d-b.com/gsoc-2014-week-9/">by SD at July 25, 2014 12:12 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 22, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-5238978956281178700">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div style="text-align: left;" dir="ltr">This week I converted all the operations on FPS to work with generators.<br />For e.g.:-<br />Addition for two series is something like<br /><pre style=""><code style="color: black;"> def add(s1, s2):  <br />   yield s1[0] + s2[0]  <br />   s1, s2 = s1.tail, s2.tail  <br />   for t in add(s1, s2):  <br />     yield t  <br /></code></pre><br />Almost all the operations use recursive generators. In this case argument to the add function is different each time.<br />However in some cases the same function with same argument is called recursively.  For e.g:- In case of division<br />  <pre style=""><code style="color: black;"> def div(s1, s2):  <br />   a, b = s1[0], s2[0]  <br />   def gen():  <br />     yield a/b  <br />     iterator = s2 * gen()  <br />     for t in iterator:  <br />       yield -t/b </code></pre><pre style=""><code style="color: black;">   for t in gen():</code></pre><pre style=""><code style="color: black;">      yield t </code></pre>gen() is called recursively with the same arguments (no arguments in this case). <br />I'll try to optimize recursive generators if possible over the next few days.<br /><br />Other problem I'm facing is args of Stream class. It is necessary that args of all Basic instances should be of type Basic. But the Stream class takes a generator object as an argument.<br /><br />Next week:-<br />- Optimize recursive generators if possible<br />- Generator object as Basic instance? (Find solution for this)<br />- Implement all necessary ``eval`` routines for FPS like _eval_derivative, _eval_leadterm etc.<br /><br /></div></div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/07/this-week-i-converted-all-operations-on.html">by Avichal Dayal (noreply@blogger.com) at July 22, 2014 01:11 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://geekpy.blogspot.com/" title="Akshay Narasimha">Akshay Narasimha</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-54146973659574488.post-6754341602192868346">
<h4><a href="http://geekpy.blogspot.com/2014/07/gsoc-week-9.html">Gsoc Week-9</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">Sorry for the late post as I had to travel a lot this week. Other than that I finished the implementation of the Hyperbola class including the tests. <a href="https://github.com/sympy/sympy/pull/7709">Here</a> is the link to the PR. Apart from that I fixed a few bugs in the Plane and Line3D class.<br /><br />This week I plan to implement the Parabola class and hopefully will get the PR on Hyperbola merged.<br /><br />Until then cheers! </div></div>







<p class="date">
<a href="http://geekpy.blogspot.com/2014/07/gsoc-week-9.html">by Akshay Narasimha (noreply@blogger.com) at July 22, 2014 06:05 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 20, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.sudhanshumishra.in/search/label/sympy" title="Shortlog">Sudhanshu Mishra(Old)</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-8847459392628952171.post-5816144129540344738">
<h4><a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-finished-refraction-at.html">GSoC'14 Progress: Finished refraction at planar surface</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I'm sorry for this delayed post. I couldn't work last week due to some other issues so had nothing much to report.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">This week I completed refraction function for planar surface, fixed some bugs and wrote tests for it. I also added a function to calculate angle of deviation. Details can be found on the following link</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;"><a style="color: blue;" href="https://github.com/sympy/sympy/pull/7626">https://github.com/sympy/sympy/pull/7626</a></div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I'm waiting for Sean to start reviewing this.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">My next priority is to complete a pending PR on mirrors.</div></div></div>







<p class="date">
<a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-finished-refraction-at.html">by Sudhanshu Mishra (noreply@blogger.com) at July 20, 2014 02:32 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://kundankumar185.wordpress.com" title="my experiments with life">Kundan Kumar</a></h3>


<div class="entrygroup" id="http://kundankumar185.wordpress.com/?p=122">
<h4 lang="en"><a href="https://kundankumar185.wordpress.com/2014/07/20/week-9-checksysodesol/">Week 9: Checksysodesol</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>This week a lot of time is spent debugging solutions. The <a href="https://github.com/sympy/sympy/pull/7738">PR</a> solves the issue <a href="https://github.com/sympy/sympy/issues/7736">#7736</a> and <a href="https://github.com/sympy/sympy/issues/7723">#7723</a> which was arising due to wrong calculation of <em>func </em>method while solving non-linear system of ODEs of type5. I sent another <a href="https://github.com/sympy/sympy/pull/7746">PR</a> which contains Checksysodesol, a method for checking the solution of system of ODEs. The PR remains to be updated with the test cases.</p>
<p>The <a href="https://github.com/sympy/sympy/pull/7703">PR</a> of non-linear system of ODEs of three equation for 1st order still remains to be merged.</p>
<p>Thats all for this week. On monday I will be going to my college, hope to work harder there. The most haunting thing at home is electricity, having tough time with it sometime getting meagerly for 3-4 hrs a day. Well thats home, I suppose, getting a delicious meal of mom’s hand.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/kundankumar185.wordpress.com/122/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/kundankumar185.wordpress.com/122/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=kundankumar185.wordpress.com&amp;blog=68025302&amp;post=122&amp;subd=kundankumar185&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://kundankumar185.wordpress.com/2014/07/20/week-9-checksysodesol/">by Kundan at July 20, 2014 10:13 AM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://thilinaatsympy.wordpress.com" title="Thilina's SymPy Blog">Thilina Rathnayake</a></h3>


<div class="entrygroup" id="http://thilinaatsympy.wordpress.com/?p=377">
<h4 lang="en"><a href="http://thilinaatsympy.wordpress.com/2014/07/20/gsoc-week-9-matrix-inverse-and-sparse-matrices/">[GSoC] Week 9: Matrix Inverse and Sparse Matrices</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Hi All, Sorry for a late blog post. I was kind of busy during last week, preparing for a competition.</p>
<p>During the last week, I mainly did two things, implementing matrix inverse and starting the implementation of sparse matrices.</p>
<h1>Implementing Matrix Inverse</h1>
<p>I implemented matrix inverse in two different methods, using Gauss Jordan elimination and fraction free LU decomposition. I had only implemented gauss Jordan elimination to solve a system <img src="http://s0.wp.com/latex.php?latex=Ax+%3D+b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="Ax = b" class="latex" title="Ax = b" /> where <img src="http://s0.wp.com/latex.php?latex=b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="b" class="latex" title="b" /> is a column matrix. I had to enhance the algorithm so that it can be used to solve several systems at once, i.e. <img src="http://s0.wp.com/latex.php?latex=b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="b" class="latex" title="b" /> can be a collection of column matrix.</p>
<p>This was not a problem in fraction free LU method because <img src="http://s0.wp.com/latex.php?latex=L&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="L" class="latex" title="L" /> and <img src="http://s0.wp.com/latex.php?latex=U&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="U" class="latex" title="U" /> factors can be used to solve column vectors <img src="http://s0.wp.com/latex.php?latex=e_%7B1%7D%2C+e_%7B2%7D%2C+.+.+.+e_%7Bn%7D&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="e_{1}, e_{2}, . . . e_{n}" class="latex" title="e_{1}, e_{2}, . . . e_{n}" /> after calculating <img src="http://s0.wp.com/latex.php?latex=L&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="L" class="latex" title="L" /> and <img src="http://s0.wp.com/latex.php?latex=U&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="U" class="latex" title="U" /> once.</p>
<h1>Implementing Sparse Matrices</h1>
<p>We decided to adapt the implementation of SciPy sparse matrices. For the time being I have implemented CSR form of a sparse matrix. CSR is an acronym for “Compress Sparse Row”. You can learn more about it in the following links.</p>
<p><a href="http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29">Wiki Article</a></p>
<p><a href="http://netlib.org/linalg/html_templates/node91.html#SECTION00931100000000000000">Netlib Article</a></p>
<p>You can find information about scipy implementation of CSR matrices <a href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html">here</a>.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/thilinaatsympy.wordpress.com/377/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/thilinaatsympy.wordpress.com/377/" alt="" border="0" /></a> <img src="http://pixel.wp.com/b.gif?host=thilinaatsympy.wordpress.com&amp;blog=52956410&amp;post=377&amp;subd=thilinaatsympy&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="http://thilinaatsympy.wordpress.com/2014/07/20/gsoc-week-9-matrix-inverse-and-sparse-matrices/">by Thilina Rathnayake at July 20, 2014 08:32 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 19, 2014</h2>

<div class="channelgroup">







<h3><a href="https://hargup.github.io/" title="Harsh's blog">Harsh Gupta</a></h3>


<div class="entrygroup" id="https://hargup.github.io/posts/week-9.html">
<h4 lang="en"><a href="https://hargup.github.io/posts/week-9.html">week 9</a></h4>
<div class="entry">
<div class="content">
<p>This week I moved back to college and my classes have restarted. This week
I worked on a PR to allow infinitely indexed <code>Range</code>. See
https://github.com/sympy/sympy/pull/7741. While doing this PR I discovered
that you cannot monkey patch <code>object</code> to assign some attribute. And I want to
mention that Sergey(one of my mentors) is damn good reviewer.</p></div>







<p class="date">
<a href="https://hargup.github.io/posts/week-9.html">by Harsh Gupta at July 19, 2014 06:50 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/2014/07/19/gsoc-week-9-dyadics-done/">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/07/19/gsoc-week-9-dyadics-done/">GSoC Week 9: Dyadics done</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Not much to report this week, except that the code for dyadics is now done, with a all-tests-passing PR being pushed. A happy moment was the basic vector framework code finally getting pushed. Phew <span class="wp-smiley wp-emoji wp-emoji-smile" title=":-)">:-)</span>. Now the next PR in line is the dyadics one itself.<br />
I also spent time mapping out the API for the Rotator classes, which I will proceed to discuss with Jason during this week’s meeting. I am still a little doubtful about how useful these classes may be, API wise. Lets see about this one.<br />
A problem that I am facing currently is the confusion about the Del operator. I started out trying to write it as a SymPy function, but then I realised that the _outputs_ from the methods of Del should be the ones being defined as unevaluated functions- like Gradient, Divergence, etc. Will have to take this up with Jason too.</p>
<p>Anyways, I hope the dyadics code goes in soon, and I plan to send one or two PRs with more functionality soon. Till then, have a great week!</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/22/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/22/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=22&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/07/19/gsoc-week-9-dyadics-done/">by srjoglekar246 at July 19, 2014 06:02 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 18, 2014</h2>

<div class="channelgroup">







<h3><a href="http://jcrist.github.io/" title="Marginally Stable">Jim Crist</a></h3>


<div class="entrygroup" id="tag:,2014-07-18:gsoc-week-9.html">
<h4><a href="http://jcrist.github.io/gsoc-week-9.html">GSoC Week 9: Docs!</a></h4>
<div class="entry">
<div class="content">
<p>This week I spent time on all sorts of little things:</p>
<ul>
<li>Finished up the refactoring of <code>KanesMethod</code></li>
<li>Little fixes to <a href="https://github.com/sympy/sympy/pull/7681">my current PR</a>. Just
  waiting on my mentors to review this, I want to get it merged soon-ish.</li>
<li>Documentation.</li>
</ul>
<p>Writing documentation is the worst<sup id="fnref:1"><a href="http://jcrist.github.io/feeds/gsoc.atom.xml#fn:1" class="footnote-ref" rel="footnote">1</a></sup>. After taking time to implement all sorts
of new interesting things, the last thing I want to do is go back and write about
them in detail. Which is why it's so important to do early on. <em>Good</em>
documentation needs to accomplish three things:</p>
<ol>
<li>Provide motivation for <em>why</em> your software is necessary/better/useful.</li>
<li>Describe the user interface, showing <em>how</em> to use each function or class.</li>
<li>Provide real world <em>examples</em> showing how to tie everything together.</li>
</ol>
<p>Python's documentation is interesting in that there are varying ways to do it.
Some of Sympy's documentation is just a nicely rendered form of the docstrings
for all the methods. Other modules have a more prose-y explanation of their
functionality. <code>mechanics</code> is one of those modules.</p>
<p>In my opinion the prose documentation approach is the better way.
Having good docstrings is important, but they aren't the end-all of
documentation<sup id="fnref:2"><a href="http://jcrist.github.io/feeds/gsoc.atom.xml#fn:2" class="footnote-ref" rel="footnote">2</a></sup>. Of course, if I have a question the first thing I'm going to
do is read the docstrings (IPython makes this trivially easy). Only if I still
have questions afterwards will I turn to the online documentation. However, it'd
be extremely off-putting if the online documentation was just the docstrings
again.</p>
<p>With the various changes I've made so far I needed to:</p>
<ol>
<li>Update the <code>LagrangesMethod</code> documentation to reflect the interface change.</li>
<li>Create a documentation page all about the linearization methods.</li>
<li>Update all the examples to reflect the new functionality.</li>
</ol>
<p>All of these are "done". I still need to go through and proofread, but overall
I'd say that the current state of the documentation is acceptable. I would like
to take some time to reorganize the layout of the whole <code>mechanics</code> documentation
at some point. The current layout isn't the easiest to navigate for what you're
looking for.</p>
<p>With this out of the way, the linearization portion of my project is tentatively
done. I say tentatively because I'm still waiting on my PRs to get merged, and 
am also still playing around with solving <a href="http://jcrist.github.io/gsoc-week-8.html">the <code>nan</code> issue</a>
that I've been writing about these last couple weeks.</p>
<p>With that done, I hope to move on to code generation. I've read the current code
generation code and documentation, as well as <a href="https://github.com/pydy/pydy/wiki/codegen-planning">this pydy wiki page</a>
on Jason's ideas about code generation. I'm still a little iffy about the intention
of this functionality, so I'm waiting until we can all meet to discuss what needs
to be done. That was supposed to have happened this week, but fell through.
Hopefully we can set some time aside next week, and I can finally get to work
on it.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Not actually the worst. <a href="http://jcrist.github.io/feeds/gsoc.atom.xml#fnref:1" rev="footnote" class="footnote-backref" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p><a href="http://stevelosh.com/blog/2013/09/teach-dont-tell/">This article</a> by Steve
  Losh is a really good read on this. <a href="http://jcrist.github.io/feeds/gsoc.atom.xml#fnref:2" rev="footnote" class="footnote-backref" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div></div>







<p class="date">
<a href="http://jcrist.github.io/gsoc-week-9.html">by Jim Crist at July 18, 2014 08:00 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://blog.s-d-b.com" title="SDB's Blog » SymPy">Soumya Dipta Biswas</a></h3>


<div class="entrygroup" id="http://blog.s-d-b.com/?p=100">
<h4 lang="en-US"><a href="http://blog.s-d-b.com/gsoc-2014-week-8/">GSoC 2014: Week 8</a></h4>
<div class="entry">
<div class="content" lang="en-US">
<p>Hello Everyone,</p>
<p>I have majorly been working on fixes and optimizations this week. There was an interesting error that was coming up because of the way quantifiers had been designed. I have made some significant changes to the Quantifier class. An interesting problem regarding constants has cropped up, which I am yet to fix. Please find the discussion regarding it at <a href="https://groups.google.com/forum/#!topic/sympy/16sSUehOFWA" target="_blank" title="Constants">FOL Constants and Unification</a>. For the rest or the week, I have majorly been writing tests for the FOL class and making small changes. Additionally I have spent some time writing tutorials for the logic module of SymPy. The documentation available currently only talks about how to do something but not what all can be done with it. The tutorials are far from complete but I will definitely try to finish the entire thing before the summer is over.</p>
<p>That’s all for now.</p>
<p>Farewell</p></div>







<p class="date">
<a href="http://blog.s-d-b.com/gsoc-2014-week-8/">by SD at July 18, 2014 01:12 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 15, 2014</h2>

<div class="channelgroup">







<h3><a href="http://geekpy.blogspot.com/" title="Akshay Narasimha">Akshay Narasimha</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-54146973659574488.post-2147515292514723776">
<h4><a href="http://geekpy.blogspot.com/2014/07/gsoc-week-8.html">Gsoc Week - 8</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">This week was great in terms of the work done. My PR on the Plane class got merged finally, so this completes the  implementation of 3-D geometry. Though my code had less test coverage to which I have sent a <a href="https://github.com/sympy/sympy/pull/7733">PR</a> which improves it .<br /><br />Apart from that I have been working on the Hyperbola class and have added most of the methods, tests remain though. <a href="https://github.com/sympy/sympy/pull/7709">Here</a> is the link to the PR.<br /><br />This week I will add  tests for the Hyperbola class and will start implementing the Parabola class once this is done.<br /><br />Until then cheers!</div></div>







<p class="date">
<a href="http://geekpy.blogspot.com/2014/07/gsoc-week-8.html">by Akshay Narasimha (noreply@blogger.com) at July 15, 2014 03:19 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 13, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-8629525061641578470">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">As it turned out, I had to replace most of my last two week's code. I used lambda functions to implement infinite structures. Lambda function stored the delayed part of the structure.<br /><br />I scraped that out and now instead use the more Python-ic generators for infinite structures.<br /><br />Earlier FPS was just for series expansion around x0=0. I added support for asymptotic expansion and series expansion around arbitrary points. This just included the substitutions as done in the series() method.<br /><br />However I faced an irritating bug regarding this.<br />The Lazyseries class has arguments: &lt;x&gt;, &lt;generator object&gt;<br />So if ``l = Lazyseries(x, generator)``<br />When  ``l.subs(x, x+1)`` is done, it turned out that &lt;generator object&gt; was being iterated. I noticed this after sometime, fixing it by writing a custom _eval_subs()<br /><br />Regarding the operation on series, I had to rewrite all of them using generators.<br />Adding series is just term-wise addition which can be accomplished by a simple one-liner i.e. ``imap(operator.add, self, other)``.<br />But it turned out that this was actually wrong. This didn't give sorted output when adding series.<br />E.g.:-<br />s1 = x + x**2 + x**3 + ...<br />s2 = x + x**3 + x**5 + ... <br />Now if s = s1 + s2,<br />s = 2x + (x**2 + x**3) + (x**3 + x**5) + ...<br />If I want series expansion of s with order = 4, it terminates at the third term after getting the x**5 term. Whereas, it should go further as there is a x**4 term too. <br /><br /><br />I wrote a custom add function merging two iterators similar to the mergesort algorithm. There is a built-in function called heapq.merge that does the same thing but it does not provide a key to compare values. It turns out that it is one of Cpython's ideas floating around to provide a key for heapq.<br /><br />I hope to get this done in a few days and get it ready for the merge.<br /><br /><br /></div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/07/as-it-turned-out-i-had-to-replace-most.html">by Avichal Dayal (noreply@blogger.com) at July 13, 2014 06:41 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://asmeurer.github.io/" title="Aaron Meurer's Blog">Aaron Meurer</a></h3>


<div class="entrygroup" id="http://asmeurer.github.io/posts/scipy-2014/">
<h4 lang="en"><a href="http://asmeurer.github.io/posts/scipy-2014/">SciPy 2014</a></h4>
<div class="entry">
<div class="content">
<div><p>I just finished <a href="https://conference.scipy.org/scipy2014/">SciPy 2014</a>, a
week-long conference in Austin, TX for scientific computing with Python.</p>
<p>This is my third SciPy (I have been to
<a href="https://asmeurersympy.wordpress.com/2011/07/17/the-scipy-2011-conference/">2011</a>
and <a href="https://asmeurersympy.wordpress.com/2013/07/02/scipy-2013/">2013</a>). This
year, the conference was noticeably larger. Last year there were
<a href="http://andy.terrel.us/blog/2013/07/05/scipy2013-recap/">~350 people</a>, this
year, there were
<a href="https://twitter.com/scopatz/status/488370261150818304">~450 people</a>.  Aside
from there being a lot more people, and the main keynotes taking place in a
larger room, the most noticeable consequence of this is that there were three
days of talks this year, and three concurrent tracks of talks all three days
(last year there were two of each). The conference consisted of two days of
tutorials, three days of talks, and two days of sprints, running from July 5
to July 12.</p>
<h2>Tutorials</h2>
<p>The conference started on Sunday with tutorials. I gave a tutorial on SymPy
with <a href="http://matthewrocklin.com/blog/">Matthew Rocklin</a> and
<a href="http://www.moorepants.info/blog/">Jason Moore</a>. The videos are on YouTube
(parts <a href="https://www.youtube.com/watch?v=Lgp442bibDM">one</a>,
<a href="https://www.youtube.com/watch?v=_PTe10whFKo">two</a>,
<a href="https://www.youtube.com/watch?v=qleGSnrnxgc">three</a>, and
<a href="https://www.youtube.com/watch?v=04AGOl1P2U4">four</a>).  I gave tutorials for
SymPy the previous two times I was at SciPy, although with different people
(with Mateusz Paprocki in 2011 and
<a href="http://ondrejcertik.blogspot.com/">Ondřej Čertík</a> in 2013). I really enjoy
seeing new people learn about SymPy, and working with Matthew Rocklin, who is
a very good speaker and teacher.</p>
<p>I also attended the tutorial on PyDy by Jason Moore, Gilbert Gede, and
Obinna Nwanna (parts <a href="https://www.youtube.com/watch?v=lWbeuDwYVto">one</a>
and <a href="https://www.youtube.com/watch?v=1-KqRvNX0po">two</a>).  This tutorial was
also well done, and I highly recommend it if you are interested in Newtonian
mechanics.</p>
<p>I unfortunately was unable to attend any of the other tutorials, but I heard
good things about them, especially the
<a href="https://www.youtube.com/watch?v=vWkgEddb4-A">Julia tutorial</a>.</p>
<h2>Talks</h2>
<p>From Tuesday to Thursday were talks. The quality of talks this year was very
high. The SciPy talks have always been high quality talks, but this year I
felt that they were particularly good. I don't think I saw a bad talk.</p>
<p>Thus, I can't really recommend the good talks that I saw without recommending
all of them. You should go to YouTube and the
<a href="https://conference.scipy.org/scipy2014/schedule/">SciPy schedule</a> and watch
any talk that looks interesting.</p>
<p>I therefore am going to recommend here the very best talks.  Two talks in
particular stood out to me as the best.</p>
<p>First is Greg Wilson's Thursday keynote, which is among the best talks I've
ever seen from any conference.</p>
<p></p><center>&lt;iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/1e26rp6qPbA" width="560"&gt;&lt;/iframe&gt;</center>
<p>Greg mentions a lot of ideas, quite a few of which are controversial, which I
think always makes for an interesting talk (it also means that I don't agree
with everything he said, although I do agree with most of it). Most of the
talk is about pedagogy, especially regarding his experiences at
<a href="http://software-carpentry.org/">Software Carpentry</a>. Some things he posited:</p>
<ul>
<li><p>There is actually good research about what methods work and don't work in
teaching. He referenced
<a href="http://www.slideshare.net/richardcookau/john-hattie-effect-sizes-on-achievement">this presentation</a>,
which lists just about every possible pedagogical method, and the net
difference that it has on students, based on over 50,000 studies. For
example, individualized instruction has a very small positive effect,
whereas teacher feedback has a very large positive effect. Since each takes
time and resources, we should focus on those effects that have the highest
impact. Greg pointed out that web-based learning has very little positive
effect, and hence is a waste of time and money. The most effective change is
removing disruptive students.</p>
<p>In particular, I liked the quote, "if you want more computing in high
school, you have to tell me what to take out."  People like to go on that
schools need to teach more of this or more of that, and computing and
programming tends to be high on that list these days, but anyone who does
not discuss what things should be removed from the curriculum, which is
already quite full, is not being honest about the discussion.</p></li>
<li><p>The other big point Greg made is that we need more incremental massive
collaboration in teaching. This is the same model that has built open source
and Wikipedia, but is mostly absent from teaching. Incremental change is
important here, as well. It is more useful for someone to contribute fixes
to existing lesson plans, so that they become better for the students, but
in his experience, people are much more willing to add new lessons.  Greg
calls for a "culture of patching". If incremental change could be adopted in
teaching, teachers could aggregate methods and lesson plans, removing the
massive duplication, and most importantly, making teaching materials that
actually work for students to learn. Greg Wilson asks why open source and
Wikipedia are able to thrive on massive <em>incremental</em> change, but teaching
is not, a question he hasn't found the answer to.</p>
<p>My thought on the matter is that unlike writing software or collecting and
presenting facts, pedagogy is very difficult. If I contribute a patch to
an open source project that fixes a bug, I can run the tests to see if my
fix is "correct". If I fix an incorrect fact on Wikipedia, it is less
easy, but I can still cite and check references to make sure it is
correct.  But for teaching, it is very difficult to know what methods work
and what don't, and as Greg pointed out at the beginning of his talk, the
effects of different methods can be very counterintuitive.</p></li>
</ul>
<p>The second talk that I recommend is
<a href="http://jakevdp.github.io/">Jake VanderPlas</a>'s talk about Frequentism and
Bayesianism.</p>
<p></p><center>&lt;iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/KhAUfqhLakw" width="560"&gt;&lt;/iframe&gt;</center>
<p>I won't summarize this talk, as Jake has done a much better job in his blog
(parts
<a href="http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/">one</a>,
<a href="http://jakevdp.github.io/blog/2014/06/06/frequentism-and-bayesianism-2-when-results-differ/">two</a>,
<a href="http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/">three</a>,
and
<a href="http://jakevdp.github.io/blog/2014/06/14/frequentism-and-bayesianism-4-bayesian-in-python/">four</a>). The
best thing is to just watch the talk.  I will just point out that before the
talk, I did not really understand the difference, not being a statistician or
someone who works with statistics regularly, and having seen the talk, I now
feel that I do.  It's a controversial topic, and if you care about the matter,
you should know that Jake is a strong Bayesian, although I felt that he gave
both sides a fair exposition.</p>
<p>Again, all talks I saw at the conference were good. But those two I felt were
the best. I should also mention here that I myself gave a talk on Conda (more
on that later).</p>
<h2>The Conference</h2>
<p>Of course, the talks are only a part of any conference. The best part of SciPy
is the gathering of the community. Each year I meet more new people, as well
as talk with people I already know, but don't get to see outside of SciPy.</p>
<p>For me, the biggest part of the interactions this year were on Conda and
packaging.  The background is that I have been working full time for Continuum
since January, and I had interned last summer, working primarily on the Conda
package manager and Anaconda, the Python distribution.  This year, some of the
biggest buzz at the conference was about Conda. I'm obviously selection
biased, because people came to me specifically to talk about Conda, but I also
overheard it in other people's conversations, in several of the presentations,
and frankly, the people who did talk to me about Conda were <em>very</em> excited
about it.  Just like everyone was talking about the IPython Notebook last year
and how it has solved the fundamental problems of sharing and presenting data
analysis, this year, everyone thanked me for my work on Conda and how it has
basically solved the packaging problem, the ubiquitous problem in Python since
people started using it.</p>
<h3>Conda: The Packaging Problem Solved</h3>
<p>Here is the talk I gave on Conda:</p>
<p></p><center>&lt;iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/UaIvrDWrIWM" width="560"&gt;&lt;/iframe&gt;</center>
<p>I made the claim in my talk that Conda has solved the packaging problem, and
the general feel from people I talked to who are using Conda is that it has.</p>
<p>I think this slide from my presentation summarizes why Conda solves the
packaging problem.</p>
<p><img width="500" src="http://asmeurer.github.io/galleries/conda_scipy2014_slide.png" /></p>
<p>One of the most amazing things about the scientific Python community, and one
of the things that I think really sets it apart from other Python communities,
is the use of Python alongside other languages, such as C, C++, Fortran, R, or
Julia.  No one language is enough to get the job done for serious scientific
work.  The fundamental brokenness of Python packaging has been that it has
focused too much on Python specific tools and processes.  The
distutils/setuptools/pip/virtualenv stack works great if your code begins and
ends with Python.  Where it falls over is when you want to link against a C
library, compile some Fortran or Cython code, and communicate with other
languages like R and Julia.  By being a system level package manager, which is
fundamentally Python agnostic, Conda is able to deal with all packages
equally, whether that package be a Python package, a C extension which other
packages link against, or Python itself.</p>
<p>By being truly cross-platform and user installable, Conda is able to reach the
maximal number of users, especially those who have historically been hit by
the packaging problem the hardest:  those who are on Windows or those who do
not have admin rights to install necessary tools to install the packages they
need.</p>
<p>Finally, Conda installs binaries, not source packages, and its metadata is
entirely static (you do not need to execute arbitrary Python code to capture
the metadata of a package).  These two things remove two of the largest
sources of issues with the existing Python packaging tools, such as compiler
errors, and nonuniformity in metadata standards (there seem to be as many
different ways of writing <code>setup.py</code> as there are packages on PyPI), by
removing arbitrary code execution from package installation.</p>
<p>Conda opens up its ecosystem to anybody by making it easy for people to build
their own Conda packages using reproducible Conda recipes.  And
<a href="https://binstar.org/">Binstar</a> makes it easy to share those packages.  I'm
very excited about Binstar, as I think it does for packaging what GitHub has
done for open source, i.e., distributes and democratizes it. There are
challenges on how to deal with this, of course. As with any distributed
democratized system, Binstar can be a wild west of packages.  Continuum is
thinking about ways to manage this complexity, while still reaping the
benefits it provides. If you have any thoughts on things that can be done, let
me know in the comments section below.</p>
<p>Of course, solving the packaging problem and removing it are different
things.  Conda does not make it easier to compile difficult packages.  It only
makes it so that fewer people have to do it.  And there is still work to be
done before Conda really takes over the world.</p>
<h2>Sprints</h2>
<p>The conference ended with two days of sprints. I mainly helped people with
Conda packaging.  One key thing that happened is that I worked with Aron
Ahmadia so that HashDist can generate Conda
packages. <a href="http://hashdist.github.io/">HashDist</a> is a package compiling
framework that makes it easy to have completely reproducible builds by hashing
all the information that was used to compile a package, and recompiling when
any of that information changes. You can learn more about HashDist by watching
Aron's talk from the conference:</p>
<p></p><center>&lt;iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/wviHkzk0AkY" width="560"&gt;&lt;/iframe&gt;</center>
<p>I am now convinced that HashDist is a good solution for people who still want
the control of compiling their own packages. Once HashDist is able to produce
Conda packages, then you can gain the benefits of both worlds: Conda's
powerful package management and environment notion, with HashDist's modular
and reproducible package building framework.</p>
<h2>Other thoughts</h2>
<p>The organizers of SciPy did an excellent job this year.  The video crew did
something which I have not seen before, which is that they uploaded the videos
of the talks on the same day that the talks were held. My talk, which was held
right before lunch, was uploaded before the last talk of the day.  Something
that I saw come out of this is that people not attending the conference were
able to watch the talks and take part of the conversation with the conference
attendees, via Twitter and other social media, or by joining the sprints after
the conference.</p>
<p>The extended three days of talks really took their toll on me. The conference
starts early enough in the morning and the social events after go so late in
the evening that each day of the conference I become a little more sleep
deprived. Usually by two days of tutorials and two days of talks I have hit my
limit, and this year, I really had a hard time making it through that fifth
day. Fortunately for the sprints I was able sleep in a little bit, as it's not
a big deal if you miss the beginning.</p>
<p>This year the conference organizers made a push for diversity, and it
shows. There were noticeably more women at the conference this year, and not
just insomuch as there were more people at all.</p>
<p>Finally, I leave you with the greatest lightening talk. Ever.</p>
<p></p><center>&lt;iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/ln4nE_EVDCg?start=3254" width="560"&gt;&lt;/iframe&gt;</center>

</div></div>







<p class="date">
<a href="http://asmeurer.github.io/posts/scipy-2014/">by Aaron Meurer at July 13, 2014 04:52 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://kundankumar185.wordpress.com" title="my experiments with life">Kundan Kumar</a></h3>


<div class="entrygroup" id="http://kundankumar185.wordpress.com/2014/07/13/week-7-and-week-8-non-linear-system-of-odes/">
<h4 lang="en"><a href="https://kundankumar185.wordpress.com/2014/07/13/week-7-and-week-8-non-linear-system-of-odes/">Week 7 and Week 8 : Non-linear system of ODEs</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>In week 7, there was negligible work done, had health issues. Because of that I was unable to update things here. During week 8, I got in non-linear system of ODEs for 3 equations of first order (<a href="https://github.com/sympy/sympy/pull/7703">PR</a>). But most of them is not responding in my system. It takes very long time to respond but still I am not getting the final solutions (before that my system crashes).</p>
<p>Though I have written method for these types, test cases for two types have been included and for other 3 I am not getting any solution. I will needing help from Tim and Sean for making any advances in this.</p>
<p>The one <a href="https://github.com/sympy/sympy/pull/7676">PR</a> of non-linear system of ODEs for 2 equation of first order has been merged and the <a href="https://github.com/sympy/sympy/pull/7678">PR</a> for docs is all ready to go.</p>
<p>The next week I plan to finish the PR of non-linear one and start new for checksysodesol which I have just started and start working on non-linear system of ODEs for 2 equation of second order.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/kundankumar185.wordpress.com/121/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/kundankumar185.wordpress.com/121/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=kundankumar185.wordpress.com&amp;blog=68025302&amp;post=121&amp;subd=kundankumar185&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://kundankumar185.wordpress.com/2014/07/13/week-7-and-week-8-non-linear-system-of-odes/">by Kundan at July 13, 2014 09:18 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 12, 2014</h2>

<div class="channelgroup">







<h3><a href="https://hargup.github.io/" title="Harsh's blog">Harsh Gupta</a></h3>


<div class="entrygroup" id="https://hargup.github.io/posts/week-7.html">
<h4 lang="en"><a href="https://hargup.github.io/posts/week-7.html">week 7</a></h4>
<div class="entry">
<div class="content">
<h2>Week 7, 8</h2>
<h3>Fu Simplification</h3>
<p>In the early part of the week 7 was thinking and working on design decisions.
I want the code to be very modular so that it could be easily extended by
people other than me. This came up in a meeting with Matthew and I want the
solvers to be like the Fu simplification explained by Matthew in this <a href="https://www.youtube.com/watch?v=QldxygVVj-s&amp;list=PLYx7XA2nY5GfuhCvStxgbynFNrxr3VFog&amp;index=20">Scipy
Talk</a>.
The idea was that we can see solving an equation as series of transformations.
If we have a lot of small transformations such that the input type is same as
output type, and some notion of what makes a "better" output we can search though
the list of transformations running one on top of other. I also posted about
it on the <a href="https://groups.google.com/forum/#!topic/sympy/42GdMJ9ssyM">mailing
list</a> which brought
out some flaws in the preliminary design. The idea is pretty crude in the
current stage and I'll have to look deeper into it, but not now.</p>
<p>I also discussed about the implementing a pattern dispached based solver
suggested by <a href="https://groups.google.com/d/msg/sympy/moSEFHop0n4/e2hBKRQ9WP4J">F.B</a>
on the mailing list. But we decided that it will be better if we finish the
equation solver by the current technique first.</p>
<h3>Intersection with S.Reals</h3>
<p>I decribed in the last post that one way to solve trigonometric equation is
rewriting them in terms of \( exp \). But that is \( exp \) in the complex domain and
the solution of \(exp(x) = a \) is \( \left\{i \left(2 \pi
n + \arg{\left (a \right )}\right) + \log{\left
(\left\lvert{a}\right\rvert \right )}\; |\; n \in \mathbb{Z}\right\}
\). Hence we have to filter out real solutions from the obtained solutions.
The filering is equivalent to the intersection of the solutions with the \( \mathbb{R}
\) set. Suppose \( g(x) \) and \( h(x) \) are real valued functions and we
have to perform
$$ \mathbb{R} \cap \left\{g{\left (n \right )} + i h{\left (n \right )}\; |\; n \in \mathbb{Z}\right\} $$
then the answer will be simply
$$ \left\{g{\left (n \right )}\; |\; n \in \left\{h{\left (n \right )} = 0\; |\; n \in \mathbb{Z}\right\}\right\} $$</p>
<p>Separate the real and imaginary parts and equate the imaginary to zero
but the problem was with the assumptions on the symbols. For example while
separating real and imaginary parts of the equation.</p>
<pre class="code literal-block"><span class="n">In</span><span class="p">[]</span><span class="o">:</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">I</span><span class="o">*</span><span class="n">n</span><span class="p">).</span><span class="n">as_imag_real</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[]</span><span class="o">:</span><span class="p">(</span><span class="n">re</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="n">im</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">re</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">im</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</pre>


<p>That is because <code>n</code> is by default complex, even in the <code>Lambda(..).expr</code>.
I wrote some code to decide the
assumption on the variable of imageset from the baseset. See <a href="https://github.com/sympy/sympy/pull/7694">PR
7694</a>.
There was another issue that needs to be resolved
<code>S.Integers.intersect(S.Reals)</code> doesn't evaluate to <code>S.Reals</code>.</p>
<h3>LambertW and Multivariate Solvers</h3>
<p>The method to solve equation containing exp and log function is using the
LambertW function. LambertW function is the inverse of \( x \exp(x) \).  The
function is multivariate function both for the real and complex
domains and Sympy has only one branch implemented. This also leads us to loss
of solutions. Aaron gave an example
<a href="https://github.com/sympy/sympy/pull/2723#issuecomment-33760912">here</a>. But I'm
pretty unfamiliar with solving by LambertW and LambertW itself and it will take
me some time to build an understanding of them.
As an ad hoc solution I'm using the code in the <code>_tsolve</code> in the
<code>solvers.solvers</code> module to do at least what the current solvers can do.</p>
<p>When the importing of <code>_tsolve</code> method was done. I started working on the
multivariate solvers. Here's how the current multivariate solvers work:</p>
<p><strong>Solving single multivariate equation</strong></p>
<ol>
<li>
<p>count the number of free symbols in f - no of symbols for
equation. If the equation has exactly one symbol which is not asked for then
use <code>solve_undetermined_coeffs</code>, the <code>solve_undetermined_coeffs</code> find the
values of the coefficient in a univariate polynomial such that it always
equates to zero.</p>
</li>
<li>
<p>Then for each symbol <code>solve_linear</code> is tried which tries to find a solution
of that symbol in terms of constants or other symbols, the docstring says</p>
<pre class="code literal-block"><span class="n">No</span> <span class="n">simplification</span> <span class="n">is</span> <span class="n">done</span> <span class="n">to</span> <span class="n">f</span> <span class="n">other</span> <span class="n">than</span> <span class="n">and</span> <span class="n">mul</span><span class="o">=</span><span class="n">True</span> <span class="n">expansion</span><span class="p">,</span>
<span class="n">so</span> <span class="n">the</span> <span class="n">solution</span> <span class="n">will</span> <span class="n">correspond</span> <span class="n">strictly</span> <span class="n">to</span> <span class="n">a</span> <span class="n">unique</span> <span class="n">solution</span><span class="p">.</span>
</pre>


</li>
</ol>
<p>So we don't have to worry about loosing a solution. For every symbol it is
checked if doesn't depend on previously solved symbols, if it does that
solution is discarded.</p>
<ol>
<li>For the symbols for which the above method failed, the <code>_solve</code> function is
called for the equation for that variable and as above if the solution contains
a variable already solved then that solution is discarded.</li>
</ol>
<p><strong>System of equations in multiple variables</strong></p>
<ul>
<li>
<p>Try to convert the system of equations into a system of polynomial equation
  in variables</p>
</li>
<li>
<p>If all the equations are linear solve then using <code>solve_linear_system</code>, check
  the result and return it. If asked for particular solution solve using
  <code>minsolve_linear_system</code></p>
</li>
<li>
<p>If the number of symbols is same as the size of the system solve the
  polynomial system using <code>solve_poly_system</code>. In case the system is
  over-determined All the free symbols intersection the variables asked for are
  calculated. Then for every subset of such symbols of length equal to that of
  the system, an attempt to solve the equations by <code>solve_poly_system</code> is made.
  Here if any of the solution depends on previously solved system the solution
  is discarded.</p>
</li>
<li>
<p>In the case there are failed equations:</p>
<ul>
<li>For every know result:</li>
<li>Substitute every thing into the failed equation and see if the equation turns to zero.
  if it does accept the result otherwise put it in the bad_results group.</li>
<li>Then try to solve try to solve the failed equation using <code>solve</code> for each symbol.</li>
<li>If that solution depends on any other previously solved symbols
  discard it.</li>
<li>If it doesn't satisfy other equations, discard it.</li>
<li>Check if the solution doesn't set any denominator to zero, if it does
  discard that solution.</li>
<li>If it satisfies the above conditions substitute this value in know
  solutions and add it as a new result.</li>
</ul>
</li>
</ul></div>







<p class="date">
<a href="https://hargup.github.io/posts/week-7.html">by Harsh Gupta at July 12, 2014 02:00 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/2014/07/12/gsoc-weeks-78-beginning-with-dyadics/">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/07/12/gsoc-weeks-78-beginning-with-dyadics/">GSoC Weeks 7,8: Beginning with Dyadics</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>The last two weeks have been slow, hence a common blog post for both of them. Last week was spent in improving the current PR even more, especially with dedicated rotator methods for each type of rotation (Body/Space/Axis/Quaternion) of Coordinate Systems. Its not much, just methods like ‘orient_new_axis’, ‘orient_new_body’, etc. as add-ons on top of the all-powerful ‘orient_new’ method. The coding involved wasn’t much, since the new methods essentially call the ‘orient_new’ method with the relevant parameters. However, the rotation API is now much simpler than using the ‘orient_new’ method for all kinds of orientations – mainly because the extra flexibility provided by the ‘orient_new’ method implies a more awkward API for the same.<br />
Jason, Mathew and Aaron were together at SciPy, during our last week’s GSoC meeting. There, the common consensus was to try and have Rotator classes to make the orientation framework even more user-friendly. Discussing the interface for the same is on this week’s meeting agenda.<br />
A big change that we thought of doing in the timeline was to let go of spherical/cylindrical systems for a while, and instead focus on dyadic tensors – since the code is mostly done (my work during last year’s GSoC), they will be a useful and powerful addition to the vector module.<br />
So my next few (much shorter than the current one) PRs would be-<br />
1) The code for dyadic tensors<br />
2) Documentation for all the basic, non-time-dependent framework<br />
3) Rotator classes(?)<br />
4) Implementation of the Del operator as an SymPy Function<br />
5) Just some basic helper methods to convert vectors from one form (rect/spherical/cylindrical) to another<br />
The code for Dyadics is mostly done, the docs are on-going, and I am thinking of having a common super-class for Vector and Dyadic- called Tensor(inheriting from Expr) – since many of the SymPy manipulation procedures work in the exact same manner for Vectors as well as Dyadics. Will discuss this with Jason soon.</p>
<p>Anyways, thats all for now, have a great week!</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/21/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/21/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=21&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/07/12/gsoc-weeks-78-beginning-with-dyadics/">by srjoglekar246 at July 12, 2014 07:37 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 11, 2014</h2>

<div class="channelgroup">







<h3><a href="http://jcrist.github.io/" title="Marginally Stable">Jim Crist</a></h3>


<div class="entrygroup" id="tag:,2014-07-11:gsoc-week-8.html">
<h4><a href="http://jcrist.github.io/gsoc-week-8.html">GSoC Week 8: Try, try, try again...</a></h4>
<div class="entry">
<div class="content">
<p>I'm still struggling to solve the <code>nan</code> and <code>oo</code> issue I've discussed in my
post <a href="http://jcrist.github.io/gsoc-week-6.html">a couple weeks ago</a>.
<a href="http://jcrist.github.io/gsoc-week-7.html">Last week</a> I showed off a custom
written subs function for use inside <code>sympy.physics.mechanics</code> that helped with
speed considerably, and <em>attempted</em> to solve the <code>nan</code> problem. This worked
great for small-medium expressions, but failed on large ones. Or did it? I'm not
sure anymore.</p>
<p><a href="https://github.com/sympy/sympy/pull/7464">This pull request</a> brought up something
that I had witnessed, but never really thought about as a potential source of my
issues. To summarize, Sympy's current (hopefully soon to be old) caching system
never clears. Ever. For interactive work, or short running sessions this is fine.
However, for the huge expressions generated in <code>mechanics</code>, this can be a source
of memory issues, as the cache grows to hold all sub-expressions that were cached.</p>
<p>It turns out that <code>simplify</code> is one of those functions that is cached. This may
explain why when I tried to use <code>msubs</code> with <code>smart_subs=True</code> (which crawls the
expression tree and does selective simplification) this resulted in <em>all</em> of my
RAM being used up (4 GB!!!). I haven't had a chance to pull in this PR into my
repo and test it out, but it sounds like it should fix the problem. Instead of
growing infinitely, the cache uses a <a href="http://jcrist.github.io/feeds/ //en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used">least recently used (LRU)</a> algorithm to
determine what stays and what is removed. The cache size can be set by the user,
so those that prefer speed over memory use can still cache everything. Per his
benchmarks it seems to be only 10% slower, which shouldn't be much of a problem.
Overall, I'm really psyched to start using this. Perhaps with this the <code>smart_subs</code>
I wrote up will work, even if it takes a while. If not, I'm kind-of out of ideas.</p>
<p>I spent some time this week trying out a few other ways of solving this problem.
So far none of them have worked.</p>
<h3>1. Using <code>cse</code>, and applying simplify selectively to the sub-expressions.</h3>
<p>The basic idea here was to apply <code>cse</code> on the expression, and then evaluate
each sub-expression. If it evaluated to <code>nan</code>, simplify it, then evaluate it
again.</p>
<p>This seemed like a good idea at first, but upon closer examination it
falls apart. The issue is that the expressions that could cancel/simplify out
are often broken into <em>separate sub-expressions</em>. This means that they are
evaluated numerically separately, and only once combined will they result in
a <code>nan</code>, at which point they can't be simplified anyway.</p>
<h3>2. Taking the limit of the bad sub-expressions.</h3>
<p>This was another idea that seemed good until I tried it. Similar to the <code>smart_subs</code>
I talked about <a href="http://jcrist.github.io/gsoc-week-7.html">last week</a>, except this
time it's taking the limit of the bad sub-expressions as they approach the operating
point. The thought being that it may be computationaly cheaper to find the limit
than to apply <code>simplify</code> and then evaluate.</p>
<p>There were several problems iwth this design. The first being that <code>Sympy</code> has no
functionality for finding multivariable limits. These can't be calculated
iteratively either (by that I mean find the limit for x, then the limit for y, then
the limit for z, etc...), as the part that could "simplify out" could already be
gone.</p>
<p>The second, and more serious issue, is that there was no way to tell if the limit
at that point was equal to the value the expression should actually evaluate too, or if it
is just the value of the <em>limit at that point</em>. For example:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">op_point</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">op_point</span><span class="p">)</span>
<span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">limit</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'+'</span><span class="p">)</span>
<span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">limit</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'-'</span><span class="p">)</span>
<span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
</pre></div>


<p>Using the method described above, it would seem that the expression should just
evaluate to <code>1/2</code>. However, if you actually plot this expression, you'll find
that there is a discontinuity at <code>a = 1</code>. From either side it approaches 1/2,
but at 1 it is actually <code>nan</code>.</p>
<h3>3. Numerical perturbation about the setpoint to find the limit of the bad sub-expressions.</h3>
<p>The idea here was to calculate the limit of the sub-expressions through numerical
evaluation and perturbation. This fails for all the reasons described above, as
well as the fact that Sympy is a symbolic computation library, and we should be
able to do this symbolically.</p>
<hr />
<p>Unfortunately those were all the ideas I had to solve this problem. If the algorithm described
last week doesn't end up working using the new cacheing system, I'm kind of stumped.
Back on <a href="http://www.seas.upenn.edu/~terfan/strugglebus/pennapps2013f/">the struggle bus</a>...</p>
<hr />
<h2>Meanwhile...</h2>
<p>As another <em>potential</em> solution, I've set about refactoring the <code>KanesMethod</code> class
in the hope that I'll find some way of generating expressions that are smaller
than they currently are. The first step was rewriting to make it readable, more
modular, and remove the dead code that had built up over the years. This is done.
In it's current state it passes all tests, and runs them in half the time that it
had before!!! Still no major reduction in expression size, but I'll hopefully find
some magical place in the code that could be made more efficient. We'll see.</p>
<p>I'm also working on the documentation for the linearization stuff that's already
done, as well as waiting on someone to finally review my
<a href="https://github.com/sympy/sympy/pull/7681">PR for LagrangesMethod support</a>. I hope to
get that merged soon so that I can get started on the code generation portion of this
project.</p></div>







<p class="date">
<a href="http://jcrist.github.io/gsoc-week-8.html">by Jim Crist at July 11, 2014 10:00 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://thilinaatsympy.wordpress.com" title="Thilina's SymPy Blog">Thilina Rathnayake</a></h3>


<div class="entrygroup" id="http://thilinaatsympy.wordpress.com/?p=10">
<h4 lang="en"><a href="http://thilinaatsympy.wordpress.com/2014/07/11/gsoc-week-8-solving-ax-b-and-determinant/">[GSoC] Week 8: Solving Ax = b and Determinant</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Hi All,</p>
<p>Sorry, I couldn’t write a blog post last week. During past two weeks, I contributed in solving some of the bugs in CSymPy and the determinant of a Matrix. Also, I implemented the solutions of the system <img src="http://s0.wp.com/latex.php?latex=Ax+%3D+b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="Ax = b" class="latex" title="Ax = b" /> by using various decomposition methods.</p>
<h1>Determinant of a Matrix</h1>
<p>I implemented determinant using two different methods, Bareiss’s method and Berkowitz algorithm.</p>
<h2>Bareiss’s algorithm</h2>
<p>Bareiss’s algorithm[1] can be used to find the row echelon form or determinant of a Matrix. This is not a division free algorithm, but guarantees that all the divisions are exact, i.e. there is no remainder [2]. The algorithm is based on Sylvester’s identity and a transformation that yields the determinant after successive application. This can be also used to solve a system of equations. You can read more about the algorithm in [2].</p>
<h2>Berkowitz Algorithm</h2>
<p>Berkowitz algorithm can also be used in calculating the determinant. This algorithms has various other applications as well, like calculating characteristic polynomial of a matrix, principal minors and Eigen values. I am yet to implement the calculation of characteristic polynomial and Eigen values using this algorithm but that won’t be a difficult thing. I wish to do it over the weekend.</p>
<h1>Ax = b</h1>
<p>I used various matrix decompositions implemented earlier to solve the system <img src="http://s0.wp.com/latex.php?latex=Ax+%3D+b&amp;bg=eff1f5&amp;fg=444444&amp;s=0" alt="Ax = b" class="latex" title="Ax = b" />. Only the fraction free LU decomposition was used earlier, but now we can solve linear systems using LU decomposition and LDL decomposition. QR and Cholesky decomposition can be enabled after figuring out a good way to do expression simplification in CSymPy.</p>
<p>I hope to work on Sparse matrices in upcoming weeks and do some benchmarks of CSymPy’s algorithms with GiNaC.</p>
<h1>References</h1>
<p>[1] Erwin H. Bareiss, Sylvester’s Identity and Multi step Integer-Preserving Gaussian Elimination</p>
<p>[2] Wikipedia article, <a href="http://en.wikipedia.org/wiki/Bareiss_algorithm" rel="nofollow">http://en.wikipedia.org/wiki/Bareiss_algorithm</a></p>
<p>[3] Wolfram Mathworld article, <a href="http://mathworld.wolfram.com/SylvestersDeterminantIdentity.html" rel="nofollow">http://mathworld.wolfram.com/SylvestersDeterminantIdentity.html</a></p>
<p> </p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/thilinaatsympy.wordpress.com/10/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/thilinaatsympy.wordpress.com/10/" alt="" border="0" /></a> <img src="http://pixel.wp.com/b.gif?host=thilinaatsympy.wordpress.com&amp;blog=52956410&amp;post=10&amp;subd=thilinaatsympy&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="http://thilinaatsympy.wordpress.com/2014/07/11/gsoc-week-8-solving-ax-b-and-determinant/">by Thilina Rathnayake at July 11, 2014 03:51 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 10, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.s-d-b.com" title="SDB's Blog » SymPy">Soumya Dipta Biswas</a></h3>


<div class="entrygroup" id="http://blog.s-d-b.com/?p=97">
<h4 lang="en-US"><a href="http://blog.s-d-b.com/gsoc-2014-week-7/">GSoC 2014: Week 7</a></h4>
<div class="entry">
<div class="content" lang="en-US">
<p>Hello everyone,</p>
<p>I have been <em>extremely</em> busy this week. So I haven’t managed to get the time to write out a proper post. However since it is already very late in the week it is better to create a small outline than wait for the actual product. Firstly, I worked on standardization of FOL expression. However the bulk of the week was consumed in writing code for the <a href="http://en.wikipedia.org/wiki/Unification_%28computer_science%29" target="_blank" title="Unification">most general unifier</a> and <a href="http://en.wikipedia.org/wiki/Resolution_%28logic%29#Resolution_in_first_order_logic" target="_blank" title="Resolution">resolution</a>. While these functions mark almost the end of my FOL proposal, the entire module is yet not ready and still needs some work. I will explain all these concepts in detail (preferably some time next week, once I have more time) along with examples and how to do it in SymPy.</p>
<p>Cheers!!!</p></div>







<p class="date">
<a href="http://blog.s-d-b.com/gsoc-2014-week-7/">by SD at July 10, 2014 07:13 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 08, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.sudhanshumishra.in/search/label/sympy" title="Shortlog">Sudhanshu Mishra(Old)</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-8847459392628952171.post-8093487105603123103">
<h4><a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-working-with-geometry.html">GSoC'14 Progress: Working with geometry</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div style="" class="markdown-body"><div style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 15px;"><span style="background-color: white;">This week I completed <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">refraction_angle</code>. Now it also works with <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code> and <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Plane</code>. This function calculates transmitted vector after refraction. <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">medium1</code> and <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">medium2</code> can be <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Medium</code>or any sympifiable object. If<code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">incident</code> is an object of <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code>, <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">normal</code> also has to be an instance of <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code> in order to get the output as a <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code>. If plane of separation is not provided and normal is an instance of <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code>, normal will be assumed to be intersecting incident ray at the plane of separation. This will not be the case when <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">normal</code> is a <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Matrix</code> or any other sequence. <br style="" />If <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">incident</code> is an instance of <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code> and <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">plane</code> has not been provided and <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">normal</code> is not<code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Ray3D</code>, output will be a <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Matrix</code>. It is dependent on <code style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-family: Menlo, Consolas, 'Courier New', monospace; font-size: 12px !important; padding: 2px 4px; white-space: nowrap;">Plane</code> so I haven’t added tests for it.</span></div><div style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 15px;"><span style="background-color: white;">Here’s the link to the PR <a style="" href="https://github.com/sympy/sympy/pull/7626">https://github.com/sympy/sympy/pull/7626</a></span></div><div style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 15px;"><span style="background-color: white;">This week I also worked on making spherical mirrors in SymPy. There are few issues that I am facing. Currently I’m working(stuck) on locating mirrors in space. It’s an amalgamation of 2D and 3D geometry. I still have to subclass Ray of geometry and make it useful for this. I’ve sent a <a style="" href="https://github.com/sympy/sympy/pull/7686">WIP PR</a>.</span></div><div style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 15px;"><span style="background-color: white;">I’m waiting for Sean to merge <a style="" href="https://github.com/sympy/sympy/pull/7607">this</a> long waited PR for moving Gaussian optics module.</span></div><div style="color: #162029; font-family: 'Open Sans', 'Trebuchet MS', Helvetica, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 15px;">That's all for now.</div></div></div></div>







<p class="date">
<a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-working-with-geometry.html">by Sudhanshu Mishra (noreply@blogger.com) at July 08, 2014 05:24 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://geekpy.blogspot.com/" title="Akshay Narasimha">Akshay Narasimha</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-54146973659574488.post-6017249369410601684">
<h4><a href="http://geekpy.blogspot.com/2014/07/gsoc-week-7.html">Gsoc Week-7</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">This has been a decent week in terms of progress. One of my long standing PR's has been merged (Line3D class). The other one on Plane has been reviewed by a lot of people and luckily I got a lot of suggestions as to how I can improve the code. I have made the required changes and am waiting for a final go on this PR as that would speed up the work on the optics module as it has a dependency on this class.<br /><br />Meanwhile this week I also worked on the Hyperbola class. I have added a few more methods. <a href="https://github.com/sympy/sympy/pull/7709">Here</a> is the link to the PR. I plan to implement more methods this week along with the Rectangular Hyperbola class.<br /><br />Until then cheers!</div></div>







<p class="date">
<a href="http://geekpy.blogspot.com/2014/07/gsoc-week-7.html">by Akshay Narasimha (noreply@blogger.com) at July 08, 2014 04:42 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 06, 2014</h2>

<div class="channelgroup">







<h3><a href="http://jcrist.github.io/" title="Marginally Stable">Jim Crist</a></h3>


<div class="entrygroup" id="tag:,2014-07-06:gsoc-week-7.html">
<h4><a href="http://jcrist.github.io/gsoc-week-7.html">GSoC Week 7: Expression Trees and Substitution</a></h4>
<div class="entry">
<div class="content">
<p>
</p><div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Late post this week due to the <a href="http://en.wikipedia.org/wiki/Independence_Day_%28United_States%29">celebration of everything that is American</a>. This week I finally got my first PR merged. The general linearization code is now part of the Sympy codebase. I currently have a <a href="https://github.com/sympy/sympy/pull/7681">PR for Lagrange support</a> waiting to be reviewed. After that I just need to write the ReST docs and the first part of the project is "complete". The rest of the week was spent on more optimization work. I'm getting closer to being able to solve the <a href="http://docs.sympy.org/dev/modules/physics/mechanics/bicycle_example.html">bicycle example</a> in a reasonable amount of time!</p>
<p><a href="http://jcrist.github.io/gsoc-week-6.html">Last week's post</a> showed the issues with the large expression size and <code>subs</code> (it takes forever to run). I took some time this week to look into how expressions work in sympy, and wrote a specialized subs function for use in <code>sympy.physics.mechanics</code>. The rest of this post will show give an overview and some benchmarks of this code.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="expression-trees">Expression Trees</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In sympy, expressions are stored as <a href="http://en.wikipedia.org/wiki/Tree_%28data_structure%29">trees</a>. Each node is an object that has an attribute <code>args</code> that contains a list of it's child nodes. This is best shown by an example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">sympy.printing.dot</span> <span class="kn">import</span> <span class="n">dotprint</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">'a, b, c'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">b</span>
<span class="n">test</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[3]:</div>


<div class="output_text output_subarea output_pyout">
<pre>a**2/b + a*cos(a + b)
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [4]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'test.dot'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dotprint</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="o">%%</span><span class="k">bash</span>
<span class="n">dot</span> <span class="o">-</span><span class="n">Tpng</span> <span class="n">test</span><span class="o">.</span><span class="n">dot</span> <span class="o">-</span><span class="n">o</span> <span class="n">test</span><span class="o">.</span><span class="n">png</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">Image</span> 
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">'test.png'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[6]:</div>


<div class="output_png output_subarea output_pyout">
<img />
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The root node of this tree is an <code>Add</code> object, as the outermost operation is adding two smaller expressions together. Going down the left side first, we see that <span class="math">\(a^2/b\)</span> is stored as multiplying <span class="math">\(a^2\)</span> times <span class="math">\(b^{-1}\)</span>. Sympy doesn't have <code>Div</code> objects, fractions are all expressed using <code>Mul</code>, with the denominator wrapped in a <code>Pow(den, -1)</code>. Traversing the right side <span class="math">\(a \cos(a + b)\)</span> is stored as multiplying <code>a</code> and a <code>cos</code> object together. The <code>cos</code> object itself contains one child node - an <code>Add</code> - which holds <code>a</code> and <code>b</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="crawling-the-tree">Crawling the Tree</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The design of sympy expression objects uses two key features: <code>args</code>, and <code>func</code>. As mentioned above, <code>object.args</code> holds a tuple of all the child nodes for that object. Likewise, <code>object.func</code> is a class method that takes in arguments, and returns an instance of that class. For <em>most</em> objects in sympy, running</p>
<pre><code>object.func(*object.args) == object</code></pre>
<p>will be a true expression. I say most because not all objects adhere to this (leaf nodes). There has been a lot of discussion about this <a href="https://github.com/sympy/sympy/wiki/Args-Invariant">here</a>, if you're interested.</p>
<p>One of the great things about this design is that it makes it very easy to write operations that modify these trees using recursion. Normally, recursion in python is frowned upon because the function calls add overhead that could be removed if rewritten as a loop. There is also a maximum recursion depth (default of 1000) to prevent stackoverflow conditions. However, a sympy expression that has 1000 nested nodes is highly unlikely (even in <code>mechanics</code>), and the recursion makes the code <em>much</em> more readable. As the <a href="http://legacy.python.org/dev/peps/pep-0020/">zen of python</a> says, "Readability counts".</p>
<p>A simple crawler to print every node is written below. It consists of two functions.</p>
<p>The first one is a generic function <code>crawl</code>, that crawls the expression tree, calls <code>func</code> on each node, and returns the result if there is one. Otherwise it recurses down a level into the child nodes, forming a list of <code>new_args</code>, and then calls <code>expr.func</code> to rebuild the expression from those args.</p>
<p>The second one is a printer function. As we don't want to modify the expression at all, we'll just print the node, and then return the expression if it doesn't have args (it's a leaf node). Note that there are more efficient ways to traverse the tree and print all the nodes - this is mostly to demonstrate <code>crawl</code>, as it will be used later.</p>
<p>Using these two functions a function that crawls the tree, prints every node, and returns the original expression can be composed using a simple lambda statement.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Crawl the expression tree, and apply func to every node."""</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val</span>
    <span class="n">new_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">crawl</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">printer</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">"""Print out every node"""</span>
    <span class="k">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>

<span class="n">print_expr</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">printer</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's test this function on our expression from above:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [8]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">temp</span> <span class="o">=</span> <span class="n">print_expr</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="c"># Checking that the expression was unchanged (temp == test)</span>
<span class="k">assert</span> <span class="n">temp</span> <span class="o">==</span> <span class="n">test</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>a**2/b + a*cos(a + b)
a**2/b
a**2
a
2
1/b
b
-1
a*cos(a + b)
a
cos(a + b)
a + b
b
a

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Comparing the printed results with the tree diagram from before, one can see how each big expression can be decomposed into smaller expressions. Further, the rebuilt expression after traversing was identical to the input expression. In the next section we'll write another function that changes the expression tree using <code>crawl</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="a-custom-subs-function">A Custom <code>subs</code> Function</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In <code>sympy.physics.mechanics</code>, we deal with symbols, dynamic symbols (which are of type <code>AppliedUndef</code>), and derivatives of these dynamicsymbols. Unfortunately, the provided <code>subs</code> function traverses inside the <code>Derivative</code> terms, giving underdesired results:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="kn">import</span> <span class="n">dynamicsymbols</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s">'x, y'</span><span class="p">)</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="n">test</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[9]:</div>


<div class="output_text output_subarea output_pyout">
<pre>a*(x(t) + Derivative(x(t), t))
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [10]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># Subbing in b for x. Desired result is a*(b + x.diff())</span>
<span class="n">test</span><span class="o">.</span><span class="n">subs</span><span class="p">({</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[10]:</div>


<div class="output_text output_subarea output_pyout">
<pre>a*(b + Derivative(b, t))
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To get around this problem, we've been using a custom function <code>_subs_keep_derivs</code>. This function creates two substitution dictionaries - one with <code>Derivative</code>, and one without. Four substitutions then take place:</p>
<ol style="">
<li>Perform subs with the terms in the derivative dictionary</li>
<li>Substitute in <code>Dummy</code> symbols for all <code>Derivative</code> terms in the resulting expression</li>
<li>Perform subs with the terms in the non-derivative dictionary</li>
<li>Substitute back the original <code>Derivative</code> terms from the <code>Dummy</code> symbols</li>
</ol>
<p>This is slow due to the need for <em>four calls to expr.subs</em>. Also, <code>subs</code> applies substitutions sequentially (i.e. each term in the substitution dict requires its own tree traversal). For our purposes in <code>mechanics</code>, this is unecessary. Using the already written <code>crawl</code> function, we can compose our own <code>subs</code> that ignores terms inside derivative objects fairly easily:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [11]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">sub_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">"""Perform expression subsitution, ignoring derivatives."""</span>
    <span class="k">if</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">sub_dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sub_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>
    
<span class="n">new_subs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_func</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That's it. Due to the composable nature of <code>crawl</code>, the code needed to perform this operation is incredibly simple. Let's test it to make sure it on our previous expression:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [12]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># Simple example</span>
<span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[12]:</div>


<div class="output_text output_subarea output_pyout">
<pre>a*(b + Derivative(x(t), t))
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So it leaves terms inside derivaties alone, exactly as desired. We can see how this compares to the previous implementation:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># Old way of doing things, taken from sympy.physics.mechanics.functions</span>
<span class="k">def</span> <span class="nf">_subs_keep_derivs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">"""Performs subs exactly as subs normally would be,</span>
<span class="sd">    but doesn't sub in expressions inside Derivatives."""</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">Derivative</span><span class="p">)</span>
    <span class="n">gs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dummy</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">]</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">sub_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="n">deriv_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">)</span>
    <span class="n">sub_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">)</span>
    <span class="n">dict_to</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">gs</span><span class="p">))</span>
    <span class="n">dict_from</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">gs</span><span class="p">,</span> <span class="n">ds</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">deriv_dict</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">dict_to</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">dict_from</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [14]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># Benchmark substitution</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using _subs_keep_derivs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">_subs_keep_derivs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using new_subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Using _subs_keep_derivs
100 loops, best of 3: 3 ms per loop
Using new_subs
10000 loops, best of 3: 39.9 µs per loop

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So it's significantly faster. For this small benchmark, approximately 75x faster. Also, as it works in only one traversal of the tree it has a smaller computational complexity - meaning that for larger expressions this speed increase will be even higher. For kicks, let's see how it compares to normal subs for an expression without derivatives:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [15]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># For kicks, see how it compares to subs for expr without derivative:</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">test</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using new subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Using subs
1000 loops, best of 3: 676 µs per loop
Using new subs
1000 loops, best of 3: 247 µs per loop

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So our implementation of <code>subs</code> is faster than sympy's. However, this micro benchmark isn't all that meaningful. Normal <code>subs</code> works in multiple passes so that expressions inside the <code>sub_dict</code> are also affected. <code>subs</code> also incorporates math knowledge about the expressions, while ours just does a naive direct match and replace. For our purposes though, this is sufficient. Also, as with all micro-benchmarks, this should be taken with a grain of salt. The main point is that our custom subs function is <em>significantly faster</em> than the old method of <code>_subs_keep_derivs</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="custom-simplification">Custom Simplification</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The other major issue I discussed <a href="http://jcrist.github.io/gsoc-week-6.html">last week</a> was that some expressions result in <code>nan</code> or <code>oo</code> (infinity) when not simplified, but after simplification result in a realizable expression. For example:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [16]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">test</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Before simplification:"</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"After simplification:"</span><span class="p">,</span> <span class="n">simplify</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Before simplification: nan
After simplification: 1

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For small expressions, doing <code>simplify</code> before evaluation is acceptable, but for larger ones simplification is way too slow. However, these divide by zero errors are caused by subexpressions, not the whole expression. Using some knowledge of the types of expressions present in the mechanics module, we can come up with some simple heuristics for what can result in <code>nan</code>, <code>oo</code> and <code>zoo</code>:</p>
<ol style="">
<li>tan(pi/2)</li>
<li>Fractions with 0 in the denominator</li>
</ol>
<p>In reality, these are the same thing, because</p>
<p><span class="math">\[ \tan(\pi/2) = \frac{\sin(\pi/2)}{\cos(\pi/2)} = \frac{1}{0} \]</span></p>
<p>Using this knowledge, we can come up with a simple algorithm for performing subs and catching these issues at the same time:</p>
<ol style="">
<li>Replace all <code>tan(*)</code> with <code>sin(*)/cos(*)</code>. This will allow us to only have to check for denominator = 0 conditions.</li>
<li>For nodes that are fractions, check if the denominator evaluates to 0. If so, apply <code>simplify</code> to the fraction, and then carry on as normal.</li>
</ol>
<p>This may not catch every instance that results in would result in a <code>nan</code> without simplification, but it should catch most of them. Also, the algorithm is so simple, that it can be implemented in only a few lines. First, the <code>tan</code> replacement. This requires almost no new code, as it can be composed using the already written <code>crawl</code> function:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [17]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">tan_repl_func</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">"""Replace tan with sin/cos"""</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span><span class="o">/</span><span class="n">cos</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>

<span class="n">tan_repl</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan_repl_func</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Testing it:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [18]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">tan_repl</span><span class="p">(</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">tan</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[18]:</div>


<div class="output_text output_subarea output_pyout">
<pre>sin(a)/cos(a) + sin(a)*cos(b)/(sin(b)*cos(a))
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So that works as expected. Now for the second pass; the subs with denominator checking and selective simplification. This takes a little bit more code than before, but I've heavily commented it so you should be able to see what's going on:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [19]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">smart_subs_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
        <span class="c"># Decompose the expression into num, den</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="n">fraction_decomp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">den</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># If there is a non trivial denominator, we need to handle it</span>
            <span class="n">denom_subbed</span> <span class="o">=</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">den</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">denom_subbed</span><span class="o">.</span><span class="n">evalf</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># If denom is 0 after this, attempt to simplify the bad expr</span>
                <span class="n">expr</span> <span class="o">=</span> <span class="n">simplify</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># Expression won't result in nan, find numerator</span>
                <span class="n">num_subbed</span> <span class="o">=</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">num_subbed</span><span class="o">/</span><span class="n">denom_subbed</span>
        <span class="c"># We have to crawl the tree manually, because `expr` may have been</span>
        <span class="c"># modified in the simplify step. First, perform subs as normal:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">sub_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">val</span>
        <span class="n">new_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">smart_subs_func</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fraction_decomp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">"""Return num, den such that expr = num/den"""</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">Mul</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">expr</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">num</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">den</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">is_Pow</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">den</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">den</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">Mul</span><span class="p">(</span><span class="o">*</span><span class="n">num</span><span class="p">)</span>
    <span class="n">den</span> <span class="o">=</span> <span class="n">Mul</span><span class="p">(</span><span class="o">*</span><span class="n">den</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we can put everything from above inside a nice wrapper function:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [20]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">smart_subs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">"""Performs subs, checking for conditions that may result in `nan` or </span>
<span class="sd">    `oo`, and attempts to simplify them out.</span>

<span class="sd">    The expression tree is traversed twice, and the following steps are</span>
<span class="sd">    performed on each expression node:</span>
<span class="sd">    - First traverse: </span>
<span class="sd">        Replace all `tan` with `sin/cos`.</span>
<span class="sd">    - Second traverse:</span>
<span class="sd">        If node is a fraction, check if the denominator evaluates to 0.</span>
<span class="sd">        If so, attempt to simplify it out. Then if node is in sub_dict,</span>
<span class="sd">        sub in the corresponding value."""</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan_repl_func</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see if it works as expected. Using a simple test case:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [21]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">test</span> <span class="o">=</span> <span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">sub_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">}</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Without `smart_subs`:"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"With `smart_subs`:"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Without `smart_subs`:
nan
With `smart_subs`:
1

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And some timings:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [22]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">print</span><span class="p">(</span><span class="s">"Using `smart_subs`:"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using simplification, then normal subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">simplify</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using trigsimp, then normal subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">trigsimp</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Using `smart_subs`:
10000 loops, best of 3: 92 µs per loop
Using simplification, then normal subs
10 loops, best of 3: 42.9 ms per loop
Using trigsimp, then normal subs
10 loops, best of 3: 30.8 ms per loop

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using selective simplification, the same results can be obtained for a fraction of the cost. 360 times faster for this small test.</p>
<p>Let's see what the overhead of <code>smart_subs</code> is for an expression that doesn't need it:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [23]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">test</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span><span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span><span class="o">/</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>
<span class="n">sub_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="k">print</span><span class="p">(</span><span class="s">"new_subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"smart_subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using simplification, then normal subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">simplify</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Using trigsimp, then normal subs"</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> <span class="n">trigsimp</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>new_subs
1000 loops, best of 3: 222 µs per loop
smart_subs
1000 loops, best of 3: 2.34 ms per loop
Using simplification, then normal subs
1 loops, best of 3: 1.11 s per loop
Using trigsimp, then normal subs
1 loops, best of 3: 815 ms per loop

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So there's considerable overhead, which was expected. Still, it's much faster than using simplify first, and then running <code>subs</code>.</p>
<p>The best use method would be to first try it with <code>new_subs</code>, and if you get a <code>nan</code> or <code>oo</code>, then try using <code>smart_subs</code>. To aid in this, we can write a nice wrapper function <code>msubs</code> that contains both methods:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [24]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">msubs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">,</span> <span class="n">smart</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">"""A custom subs for use on expressions derived in physics.mechanics.</span>

<span class="sd">    Traverses the expression tree once, performing the subs found in sub_dict.</span>
<span class="sd">    Terms inside `Derivative` expressions are ignored:</span>

<span class="sd">    &gt;&gt;&gt; x = dynamicsymbols('x')</span>
<span class="sd">    &gt;&gt;&gt; msubs(x.diff() + x, {x: 1})</span>
<span class="sd">    Derivative(x, t) + 1</span>

<span class="sd">    If smart=True, also checks for conditions that may result in `nan`, but</span>
<span class="sd">    if simplified would yield a valid expression. For example:</span>

<span class="sd">    &gt;&gt;&gt; (sin(a)/tan(a)).subs(a, 0)</span>
<span class="sd">    nan</span>
<span class="sd">    &gt;&gt;&gt; msubs(sin(a)/tan(a), {a: 0}, smart=True)</span>
<span class="sd">    1</span>

<span class="sd">    It does this by first replacing all `tan` with `sin/cos`. Then each node</span>
<span class="sd">    is traversed. If the node is a fraction, subs is first evaluated on the</span>
<span class="sd">    denominator. If this results in 0, simplification of the entire fraction</span>
<span class="sd">    is attempted. Using this selective simplification, only subexpressions</span>
<span class="sd">    that result in 1/0 are targeted, resulting in faster performance."""</span>

    <span class="k">if</span> <span class="n">smart</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">smart_subs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">new_subs</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
        <span class="c"># For matrices, func is applied to each element using `applyfunc`</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">applyfunc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In [25]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c">#Check that the results are the same:</span>
<span class="n">msubs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span> <span class="o">==</span> <span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
<span class="n">msubs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">,</span> <span class="n">smart</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[25]:</div>


<div class="output_text output_subarea output_pyout">
<pre>True
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code has been included in my optimization branch, and is performing admirably against all the included tests (so much speed up!!!). The big test though is the bicycle example.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="the-big-test">The Big Test</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To really put this new code to the test I applied it to the <a href="http://docs.sympy.org/dev/modules/physics/mechanics/bicycle_example.html">bicycle example</a>, which has operation counts ranging from 400,000 to several million depending on which expression you're working with. How did it fair? Mixed results...</p>
<p>Using <code>msubs</code> with <code>smart=False</code> in the formation of the linearizer object resulted in a huge speed increase. Previously using <code>_subs_keep_derivs</code> there resulted in a run time of several hours. Now it runs in 14 seconds!</p>
<p>The second test is in the application of the operating point to the M, A, and B matrices. Previously evaluating these had resulted in <code>nan</code> and <code>oo</code>, and with operation counts exceeding 400,000 for M pre-simplification is out of the question. I tried using <code>msubs</code> with <code>smart=True</code> on this M, and let it run for 6 hours. It ended up consuming 98% of my RAM (4 GB worth), and it still wasn't done :( So for reasonable sized expressions the smart_subs we've implemented is acceptable, but it still doesn't work for the huge expressions. I'll have to keep working on optimizations to make this faster/reduce the initial expression size.</p>
<p>Still, all is not lost. Going from formulation to M, A, and B without the operating point substitution now only takes 20 minutes - down from the several hours before. This is actually faster than the previous linearize method, but unforunately results in expressions that evaluate to <code>nan</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="future-work">Future Work</h2>
<p>Per my <a href="https://github.com/pydy/pydy/wiki/GSoC-2014-Application:-Jim-Crist-%28Linearization-Routines-for-Equations-of-Motion%29#timeline">original timeline</a> I was supposed to be working on "pre-linearization" routines for generating the equations of motion directly in linearized form. I think this will be dropped in favor of cleaning up and speeding up the existing codebase. There's some dead code that needs removing, and I have some other ideas for speed-ups that I'd like to try.</p>
<p>After that, I hope to get to the original part 3 of the project, which is adding support for matrices to the code-generation code. Not sure if this would live in sympy or pydy, but it would be extremely useful to myself and others. For now I plan on taking it week-by-week.</p>
<hr />
<p><em>If you have thoughts on how to deal with the <code>nan</code> and <code>oo</code> issue, please let me know in the comments. Thanks!</em></p>
</div>
</div>
</div><p></p></div>







<p class="date">
<a href="http://jcrist.github.io/gsoc-week-7.html">by Jim Crist at July 06, 2014 10:25 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 05, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-7888716637890298695">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">This week was unproductive coding-wise. I spent most of the time designing and writing pseudo-code.<br /><br />For the Formal Power Series part of my project, last week I implemented the algorithm to find general term for series expansion of a function. Also various operations on series like addition, multiplication, composition were implemented.<br />I store the coefficients of series in a Stream class which works on lazy evaluation scheme.<br /><br />However the Stream class currently is not a very generic one. It can only be used to represent series expansion of a function with parameters like "x", "general_term" and methods for series arithmetics.<br /><br />To make it more generic, I'll make the Stream class act only as a container to store elements (infinitely many in lazy scheme).<br />To represent infinite series, there will be another class - Lazyseries. It will store its coefficients using the Stream class and will contain the methods for series arithmetics.<br />This way, the stream class can also be used to store other infinite structures. E.g.:- Fibonacci series can be represented in the following way using "Stream"<br /><br /><pre style=""><code style="color: black;"> def fib(x, y):  <br />   head = (x, y)  <br />   tail = lambda: fib(y, x+y)  <br />   return Stream(head, tail)  <br /></code></pre><br /><br />But I'm a bit unsure if this is the best way for lazy evaluation. Currently I store the first element and the rest of the elements as a lambda function. Lambda function delays the evaluation of the tail. I don't know if this is the most efficient method in terms of memory and speed.<br /><br />As an example:- Multiplication of two series is defined as:-<br />head = head1 * head2<br />tail = head1 * tail2 + head2 * tail1 + tail1 * tail2<br />Now when tail is evaluated continuously, many stream objects are created in the memory resulting in memory overflow. I'm working on this.</div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/07/this-week-was-unproductive-coding-wise.html">by Avichal Dayal (noreply@blogger.com) at July 05, 2014 08:53 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 04, 2014</h2>

<div class="channelgroup">







<h3><a href="http://tarzzz.github.io/gsoc14" title="Tarun Gaba's blog - GSoC">Tarun Gaba</a></h3>


<div class="entrygroup" id="http://tarzzz.github.io/gsoc14/post-mid-terms.html">
<h4><a href="http://tarzzz.github.io/gsoc14/post-mid-terms.html">GSoC 14: Midterm Evaluations have ended!</a></h4>
<div class="entry">
<div class="content">
{% include JB/setup %}


[ &lt;-Back to posts ](/gsoc14)

It has been a week after the midterm evaluations are over, and I am back to work
after a small break(with permission from my mentor, off course!).
I have been working on writing a test suite for the Dynamics Visualizer. This
is the wrapping up part of the visualizer for this gsoc.

[Here](/blog/visualization/index.html?load=samples/scene_desc.json) is a visualization 
of a rolling disc(it is slightly buggy though), that i prepared.

To view the animation, allow the visualization to load in the webpage(it shall load
automatically), and then hit the `Play Animation` button.


After writing some tests for visualizer, I am going to start fleshing out API
for the module, to provide IPython support to the visualizer. The main aim of
writing this module is to make visualizer interactive, in the sense, that a user 
should be able to change all the variables from the GUI(which is rendered
inside notebook's output cell) and then rerun the simulations without having to 
write any code, or execute any of the code manually. The data of the new simulations
will be automatically fed into visualizer, and then it can be viewed as an animation.

This whole workflow will be very convenient for the existing PyDy users, as well as
the new ones. It will be particularly convenient for those who want to just play around
with the existing systems, by changing the system variables, and view how it affects
the resulting animations.

With the development of this module, as well as ongoing improvements in the other PyDy
modules(by my fellow GSoC'ers from PyDy), we should be able to perform lightening fast
simulations for a system, as well as view them on a canvas. 

I will keep posting the new work I will be doing, with better details(once I actually start
implementing new stuff!).

[ &lt;-Back to posts ](/gsoc14)</div>







<p class="date">
<a href="http://tarzzz.github.io/gsoc14/post-mid-terms.html">July 04, 2014 05:40 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 03, 2014</h2>

<div class="channelgroup">







<h3><a href="http://blog.s-d-b.com" title="SDB's Blog » SymPy">Soumya Dipta Biswas</a></h3>


<div class="entrygroup" id="http://blog.s-d-b.com/?p=91">
<h4 lang="en-US"><a href="http://blog.s-d-b.com/gsoc-2014-week-6/">GSoC 2014: Week 6</a></h4>
<div class="entry">
<div class="content" lang="en-US">
<p>Welcome back everyone,</p>
<p>This week I set about to fix one of my long pending PR associated with Propositional Logic. Following that I worked on conversion to Prenex Normal Form and Skolem Normal Form. Firstly, let me talk about the PR associated with Propositional Logic. It basically involved adding small functions like validity, entailment and some small modifications to the Propositional Knowledge Base. I assume most of the readers would be familiar with the concept of <a href="http://en.wikipedia.org/wiki/Validity" target="_blank" title="Validity">validity</a> and <a href="http://en.wikipedia.org/wiki/Logical_consequence" target="_blank" title="Entailment">entailment</a> but I will briefly mention the algorithm to compute this and the intuition behind the same. Validity is given by <code>not satisfiable(Not(expr))&lt;/expr&gt;</code>. Why does this work? If an expr is valid then it is True under all interpretations. Therefore <code>Not(expr)</code> is always False i.e. it cannot be satisfied by any model. Hence if the negation of the expr is unsatisfiable then the original formula is valid. Moving on to entailment, the conventional definition stands that a set of formulas formula_set entails a formula expr iff expr is True whenever formula_set is True. That basically boils down to <code>And(*formula_set) &gt;&gt; expr</code>. However there is another method, to accomplish the same, namely <code>not satisfiable(And(~expr, *formula_set))</code>. Ok, firstly why does this non-intuitive expression even work? Well whenever formula set is True, expr must be True (for the entailment to hold) hence ~expr must be False thereby making the entire conjunction False. If the formula_set is False then the conjunction is clearly False. So if the entailment is to hold then the conjunction must be unsatisfiable, which is exactly what was implied earlier. Let us look at one special case before moving on. What if the formula_set is empty. While the solution is a matter of convention to a good extent, SymPy uses ideas from the second formula to resolve the ambiguity which yields <code>not satisfiable(And(~expr))</code> which is exactly the same as validity of expr. Theoretically entailment means “Given <em>this</em> what can we infer”. So, given nothing we can only infer that, which is always the truth. Except for these changes I also made changes to PropKB which is probably best not discussed at the moment.</p>
<p>Coming now to the major interest of the post. The major time was spent in the functionality for conversion to <a href="http://en.wikipedia.org/wiki/Prenex_normal_form" target="_blank" title="PNF">Prenex Normal Form</a> and <a href="http://en.wikipedia.org/wiki/Skolem_normal_form" target="_blank" title="SNF">Skolem Normal Form</a>. Without going into a lot of details let me introduce these to you. A formula in PNF consists of a sequence of Quantifiers (containing both Universal and Existential quantifiers) followed by a Quatifier-less expression. The series of Quantifiers is called a <em>prefix</em> while the expression is called the matrix. Now, every formula in FOL can be converted to an <em>equivalent</em> formula in PNF. The matrix can be compared to a formula in propositional logic (if we think of the predicates as literals of PL) and most of the operations of PL become relevant. However we cannot completely ignore the prefix and hence we try to perform some operations such that we can look at the matrix without any regard to the prefix. This brings us to the Skolem Normal Form. A formula is converted to SNF by first converting it to PNF then dropping the Existential quantifiers (according to some rule). Now the prefix contains only Universal quantifiers, which are assumed to be implicitly implied and hence simply ignored while looking at the matrix. I will be updating the various rules for conversion and examples soon. Till then stay tuned.</p>
<p>Arrivederci</p></div>







<p class="date">
<a href="http://blog.s-d-b.com/gsoc-2014-week-6/">by SD at July 03, 2014 06:13 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 02, 2014</h2>

<div class="channelgroup">







<h3><a href="https://hargup.github.io/" title="Harsh's blog">Harsh Gupta</a></h3>


<div class="entrygroup" id="https://hargup.github.io/posts/week-6.html">
<h4 lang="en"><a href="https://hargup.github.io/posts/week-6.html">week 6</a></h4>
<div class="entry">
<div class="content">
<h3>Solving Trigonometric Function (part II)</h3>
<p>There is another technique to solve trigonometric function. Just as every
trigonometric function can be written in term of \( \tan \) it can also be written
in terms of \( \exp \).</p>
<p>$$ sin(x) = - \frac{i}{2} \left(e^{i x} - e^{- i x}\right) $$
$$ cos(x) = \frac{e^{i x}}{2} + \frac{1}{2} e^{- i x} $$
$$ tan(x) = \frac{i \left(- e^{i x} + e^{- i x}\right)}{e^{i x} + e^{- i x}} $$
$$ cot(x) = \frac{i \left(e^{i x} + e^{- i x}\right)}{e^{i x} - e^{- i x}} $$</p>
<p>So, solving a trigonometric equation is equivalent to solving a rational
function in \( \exp \). Note: here the \( \exp \) is in complex domain and
equation \( exp(x) = y \) has solution
\( \left\{i \left(2 \pi n + \arg{\left (y \right )}\right) + \log{\left (\left\lvert{y}\right\rvert \right )}\; |\; n \in \mathbb{Z}\right\} \)
when solved for \( x \).</p></div>







<p class="date">
<a href="https://hargup.github.io/posts/week-6.html">by Harsh Gupta at July 02, 2014 08:43 AM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://blog.sudhanshumishra.in/search/label/sympy" title="Shortlog">Sudhanshu Mishra(Old)</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-8847459392628952171.post-3401083357494053543">
<h4><a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-week-6.html">GSoC'14 progress: Week 6</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr"><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">It was a busy week though I managed to do some work.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I've been working on following things:</div><ul style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin: 0px 0px 9px 25px; padding: 0px;"><li style="">Integrating <code style="background-color: #f7f7f9; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(225, 225, 232); color: #dd1144; font-family: Consolas, 'Liberation Mono', Courier, monospace !important; font-size: 12px; padding: 3px 4px;">TWave</code> with <code style="background-color: #f7f7f9; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(225, 225, 232); color: #dd1144; font-family: Consolas, 'Liberation Mono', Courier, monospace !important; font-size: 12px; padding: 3px 4px;">refraction_angle</code>(<a style="color: blue;" href="https://github.com/sympy/sympy/pull/7626">7626</a>)</li><li style="">Interference class</li></ul><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">Some blocking 3D geometry code got merged yesterday which gives me a lot of new things to work on. :-)</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I also tried to take a look on very old <a style="color: blue;" href="https://github.com/sympy/sympy/pull/1226">patch</a> for <code style="background-color: #f7f7f9; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; border: 1px solid rgb(225, 225, 232); color: #dd1144; font-family: Consolas, 'Liberation Mono', Courier, monospace !important; font-size: 12px; padding: 3px 4px;">gaussopt</code>.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">This week I wrote a script to update the development documentation when a PR gets merged into the master. This is up and running.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">I passed mid term evaluation that took place last week and I would like to thank <a style="color: blue;" href="https://github.com/flacjacket">Sean</a>, <a style="color: blue;" href="https://github.com/certik">Ondrej</a>,<a style="color: blue;" href="https://github.com/asmeurer">Aaron</a> and <a style="color: blue;" href="https://github.com/smichr">Chris</a> for their constant support.</div><div style="color: #444444; font-family: Arvo, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; margin-bottom: 9px;">That's all for now. <em style="">Cheers!</em></div></div></div>







<p class="date">
<a href="http://blog.sudhanshumishra.in/2014/07/gsoc14-progress-week-6.html">by Sudhanshu Mishra (noreply@blogger.com) at July 02, 2014 03:27 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>July 01, 2014</h2>

<div class="channelgroup">







<h3><a href="http://geekpy.blogspot.com/" title="Akshay Narasimha">Akshay Narasimha</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-54146973659574488.post-9069493126125199249">
<h4><a href="http://geekpy.blogspot.com/2014/06/gsoc-week-6.html">Gsoc Week-6</a></h4>
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">Sorry for the late post ,had an issue with my data card . First of all I couldn't get my PR's (Line3D, Plane) merged as Stefan was busy, though I addressed all of his issues and hopefully it is time before they get merged.<br /><br />I started working on the Hyperbola class, you can find the code <a href="https://github.com/akshayah3/sympy/blob/hyperbola/sympy/geometry/hyperbola.py">here</a>.<br />This week I plan to continue the work on the Hyperbola class and hopefully will get my previous PR's merged.<br /><br />Until then cheers! </div></div>







<p class="date">
<a href="http://geekpy.blogspot.com/2014/06/gsoc-week-6.html">by Akshay Narasimha (noreply@blogger.com) at July 01, 2014 04:22 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>June 29, 2014</h2>

<div class="channelgroup">







<h3><a href="https://kundankumar185.wordpress.com" title="my experiments with life">Kundan Kumar</a></h3>


<div class="entrygroup" id="http://kundankumar185.wordpress.com/?p=102">
<h4 lang="en"><a href="https://kundankumar185.wordpress.com/2014/06/29/102/">GSoC Week 6: Docs of system of ODEs</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>This week has been hell of a week of work and enjoyment with marriage preparation of my cousin. This lead to very less progress in my project work. I was unable to do much with just completion of docs of all implemented methods of system of ODEs. The non-linear system of ODEs which was left on last week has not been much progressed since then.</p>
<p>I have confusion too on representation of few things which I posted on <a href="https://groups.google.com/forum/#!topic/sympy/LjAIJVt_FyA">mailing list</a>. I need community opinion on these things before I proceed on these facts. This will be all for this week. Rest I intend to implement non-linear system of first order for 3 equations during next week.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/kundankumar185.wordpress.com/102/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/kundankumar185.wordpress.com/102/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=kundankumar185.wordpress.com&amp;blog=68025302&amp;post=102&amp;subd=kundankumar185&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://kundankumar185.wordpress.com/2014/06/29/102/">by Kundan at June 29, 2014 04:52 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="https://codesachin.wordpress.com" title="Dream. Think. Code. » Google Summer of Code 2014">Sachin Joglekar</a></h3>


<div class="entrygroup" id="http://codesachin.wordpress.com/?p=19">
<h4 lang="en"><a href="https://codesachin.wordpress.com/2014/06/29/gsoc-week-6-completing-coordinate-systems/">GSoC Week 6: Completing coordinate systems</a></h4>
<div class="entry">
<div class="content" lang="en">
<p>Phew. This was a busy week. Initially, the plan was to push a WIP PR (without tests maybe) with the code for coordinate systems and point classes. Midway through the week, Jason and I decided to push this new code to the first PR itself, and merge the entire fundamental framework together – in a single PR. Initially I did get a little worked up looking at the amount of work that needed to be done.</p>
<p>However, things moved much faster than expected – though with a lot of issues along the way. There were problems with the args for CoordSysRect, then some issues with the Tree-algorithm for inter-point distance calculation, and then some more with the code that implements orientation of systems wrt each other…you get the drift. But the code is finally done and polished, along with the unit tests and doctests. Thats why the late post this week – I ‘bravely’ decided to get the code fully working, without glitches, and then only do the blogpost for the week. Thankfully, the plan was a success <span class="wp-smiley wp-emoji wp-emoji-bigsmile" title=":-D">:-D</span>.</p>
<p>Some minor things still remain, like renaming of some attributes to follow conventions  – mostly cosmetic changes, nothing that will affect how the code works.</p>
<p>The next immediate steps now would be –</p>
<p>1. Finish off the PR and get it merged.</p>
<p>2. Study caching mechanisms and implement them in a new ‘patch’ PR.</p>
<p>The first PR is <a href="https://github.com/sympy/sympy/pull/7566">here</a>.</p>
<p>See you later then, next week <span class="wp-smiley wp-emoji wp-emoji-smile" title=":-)">:-)</span>.</p><br />  <a href="http://feeds.wordpress.com/1.0/gocomments/codesachin.wordpress.com/19/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/codesachin.wordpress.com/19/" alt="" border="0" /></a> <img src="https://pixel.wp.com/b.gif?host=codesachin.wordpress.com&amp;blog=67602166&amp;post=19&amp;subd=codesachin&amp;ref=&amp;feed=1" alt="" border="0" width="1" height="1" /></div>







<p class="date">
<a href="https://codesachin.wordpress.com/2014/06/29/gsoc-week-6-completing-coordinate-systems/">by srjoglekar246 at June 29, 2014 11:28 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>June 28, 2014</h2>

<div class="channelgroup">







<h3><a href="http://gsocblog.blogspot.com/" title="GSoC 2014 with SymPy">Avichal Dayal</a></h3>


<div class="entrygroup" id="tag:blogger.com,1999:blog-283806077182880539.post-1947632693391126346">
<div class="entry">
<div class="content">
<div style="text-align: left;" dir="ltr">&lt;script src="http://latex.codecogs.com/latexit.php?p&amp;amp;li&amp;amp;div" type="text/javascript"&gt;&lt;/script&gt;  <br /><div style="text-align: left;" dir="ltr">A bit late for this week's blog.<br /><br />Implementing the solveRE() method took longer than I expected. I spent most of this week doing that. This method solves recurrence equation to get the general term for series expansion of a function.<br />rsolve() can solve some equations but not recurrences of hypergeometric type.<br /><br />Hypergeometric recurrence equation is of type:-<br />Q(k) * r(k + m) = P(k) * r(k)<br />where P(k) and Q(k) are rational functions in k.<br /><br />For the case when m = 1, there exists a simple formula to get r(k).<br />When m &gt; 1, we can represent it as sum of m-shifted m-fold symmetric functions.<br />For e.g.:- Let the RE be,<br />r(k + m) = R(k) . r(k)<br />We replace k with mk and r(mk) with c(k) we get,<br />r(m(k+1)) = R(mk) . r(mk) which is equivalent to<br />c(k+1) = R(mk) . c(k)<br />Now we can use the same formula for the case when m = 1.<br /><br />Similarly by replacing m with km + 1, km + 2 ...., we can solve for r(k) as sum of m-shifted m-fold symmetric functions.<br /><br />Here are some results:-<br /><div style="clear: both; text-align: center;" class="separator"><a style="margin-left: 1em; margin-right: 1em;" href="http://2.bp.blogspot.com/-_dcemQVhEMw/U65p6UK-xvI/AAAAAAAAAc8/ustuXJs0CKs/s1600/FPS-1.png"><img width="400" src="http://2.bp.blogspot.com/-_dcemQVhEMw/U65p6UK-xvI/AAAAAAAAAc8/ustuXJs0CKs/s1600/FPS-1.png" border="0" height="223" /></a></div><br /><div style="clear: both; text-align: center;" class="separator"><a style="margin-left: 1em; margin-right: 1em;" href="http://2.bp.blogspot.com/-QNwhi4R9cx8/U65p6KCONkI/AAAAAAAAAdA/Dfnsnqp7hek/s1600/FPS-2.png"><img width="400" src="http://2.bp.blogspot.com/-QNwhi4R9cx8/U65p6KCONkI/AAAAAAAAAdA/Dfnsnqp7hek/s1600/FPS-2.png" border="0" height="223" /></a></div><br />The general terms are not in their simplest form. RisingFactorial must be re-written in terms of factorial to bring it to the usual form.<br /><br />Now, I'm able to find FPS or infinite series for a wide range of functions. Next week, I'll take care of efficiency and making the code more in line with SymPy's style.<br /><br /></div></div></div>







<p class="date">
<a href="http://gsocblog.blogspot.com/2014/06/a-bit-late-for-this-weeks-blog.html">by Avichal Dayal (noreply@blogger.com) at June 28, 2014 07:21 AM</a>
</p>
</div>
</div>


</div>

</div>


<div class="sidebar">
<img src="images/sympy-100px.png" width="100" height="84" alt="">

<h2>Subscriptions</h2>
<ul>
<li>
<a href="http://asmeurer.github.io/rss.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://asmeurer.github.io/" title="Aaron Meurer's Blog">Aaron Meurer</a>
</li>
<li>
<a href="https://asmeurersympy.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://asmeurersympy.wordpress.com" class="message" title="no activity in 7 days">Aaron Meurer (old)</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/936818886435977143/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://addisoncugini.blogspot.com/" class="message" title="no activity in 7 days">Addison Cugini</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/54146973659574488/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://geekpy.blogspot.com/" class="message" title="no activity in 7 days">Akshay Narasimha</a>
</li>
<li>
<a href="https://amakelov.wordpress.com/category/google-summer-of-code-2012/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://amakelov.wordpress.com" class="message" title="no activity in 7 days">Aleksandar Makelov</a>
</li>
<li>
<a href="https://angadhsympy.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://angadhsympy.wordpress.com" class="message" title="no activity in 7 days">Angadh Nanjangud</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/283806077182880539/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://gsocblog.blogspot.com/" class="message" title="no activity in 7 days">Avichal Dayal</a>
</li>
<li>
<a href="http://www.catchmrbharath.in/programming.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a class="message" title="404: not found">Bharath M R</a>
</li>
<li>
<a href="http://brianegranger.com/?feed=rss2" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://brianegranger.com" class="message" title="404: not found">Brian Granger</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/267967203861801529/posts/default/-/SymPy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://straightupcoding.blogspot.com/search/label/SymPy" class="message" title="no activity in 7 days">Brian Jorgensen</a>
</li>
<li>
<a href="https://geekiology.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://geekiology.wordpress.com" class="message" title="no activity in 7 days">Chetna Gupta</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/5997157115341007565/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://lasympy.blogspot.com/" class="message" title="no activity in 7 days">Chris Wu</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/22566012/posts/default/-/sympy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://haz-tech.blogspot.com/search/label/sympy" class="message" title="no activity in 7 days">Christian Muise</a>
</li>
<li>
<a href="https://csousahome.wordpress.com/tag/sympy/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://csousahome.wordpress.com" class="message" title="no activity in 7 days">Cristóvão Sousa</a>
</li>
<li>
<a href="http://dlpeterson.com/blog/?feed=rss2" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://dlpeterson.com/blog" class="message" title="404: not found">Dale Peterson</a>
</li>
<li>
<a href="https://wdjoyner.wordpress.com/category/sympy/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://wdjoyner.wordpress.com" class="message" title="no activity in 7 days">David Joyner</a>
</li>
<li>
<a href="http://fa.bianp.net/blog/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://fa.bianp.net/" class="message" title="no activity in 7 days">Fabian Pedregosa</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/7648717043547744590/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://gsoc-mathtex.blogspot.com/" class="message" title="no activity in 7 days">Freddie Witherden</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/4754734402679928849/posts/default/-/sympy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://fredrik-j.blogspot.com/search/label/sympy" class="message" title="no activity in 7 days">Fredrik Johansson</a>
</li>
<li>
<a href="https://gilbertgede.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://gilbertgede.wordpress.com" class="message" title="no activity in 7 days">Gilbert Gede</a>
</li>
<li>
<a href="https://rhoforsympy.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://rhoforsympy.wordpress.com" class="message" title="no activity in 7 days">Guru Devanla</a>
</li>
<li>
<a href="http://hargup.github.io/rss.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://hargup.github.io/" class="message" title="404: not found">Harsh Gupta</a>
</li>
<li>
<a href="http://f1728.wordpress.com/category/SymPy/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://f1728.wordpress.com" class="message" title="no activity in 7 days">Jeremias Yehdegho</a>
</li>
<li>
<a href="http://jcrist.github.io/feeds/gsoc.atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://jcrist.github.io/" class="message" title="no activity in 7 days">Jim Crist</a>
</li>
<li>
<a href="https://sophiessympyblog.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://sophiessympyblog.wordpress.com" class="message" title="no activity in 7 days">Katja Sophie Hotz</a>
</li>
<li>
<a href="" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a class="message" title="404: not found">Kazuo Thow</a>
</li>
<li>
<a href="https://kundankumar185.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://kundankumar185.wordpress.com" class="message" title="no activity in 7 days">Kundan Kumar</a>
</li>
<li>
<a href="http://matthewrocklin.com/blog//feed.sympy.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://matthewrocklin.com/blog/" class="message" title="no activity in 7 days">MRocklin</a>
</li>
<li>
<a href="https://manojbits.wordpress.com/category/sympy-2/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://manojbits.wordpress.com" class="message" title="no activity in 7 days">Manoj Kumar</a>
</li>
<li>
<a href="https://meclark256.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://meclark256.wordpress.com" class="message" title="no activity in 7 days">Mary Clark</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/9135222751616024074/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://mattjcurry.blogspot.com/" class="message" title="no activity in 7 days">Matthew Curry</a>
</li>
<li>
<a href="https://sympystats.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://sympystats.wordpress.com" class="message" title="no activity in 7 days">Matthew Rocklin</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/2520472460430880330/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://sympy.blogspot.com/" class="message" title="no activity in 7 days">Official SymPy blog</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/6568744196982634289/posts/default/-/sympy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://ondrejcertik.blogspot.com/search/label/sympy" class="message" title="no activity in 7 days">Ondřej Čertík</a>
</li>
<li>
<a href="https://musingsofafriend.wordpress.com/tag/sympy/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://musingsofafriend.wordpress.com" class="message" title="no activity in 7 days">Prasoon Shukla</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/436496352933562096/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://robert-code.blogspot.com/" class="message" title="no activity in 7 days">Robert Schwarz</a>
</li>
<li>
<a href="https://codesachin.wordpress.com/category/google-summer-of-code-2014/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://codesachin.wordpress.com" class="message" title="no activity in 7 days">Sachin Joglekar</a>
</li>
<li>
<a href="http://sahilshekhawat.github.io/rss.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://sahilshekhawat.github.io" title="Sahil Shekhawat">Sahil Shekhawat</a>
</li>
<li>
<a href="https://saptman.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://saptman.wordpress.com" class="message" title="no activity in 7 days">Saptarshi Mandal</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/2736678015821545355/posts/default" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://sympymatrix.blogspot.com/" class="message" title="no activity in 7 days">Saurabh Jha</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/8510171342300140296/posts/default/-/sympy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://seanvig.blogspot.com/search/label/sympy" class="message" title="no activity in 7 days">Sean Vig</a>
</li>
<li>
<a href="https://scolobb.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://scolobb.wordpress.com" class="message" title="no activity in 7 days">Sergiu Ivanov</a>
</li>
<li>
<a href="https://sherjilozair.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://sherjilozair.wordpress.com" class="message" title="no activity in 7 days">Sherjil Ozair</a>
</li>
<li>
<a href="http://blog.s-d-b.com/category/sympy/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://blog.s-d-b.com" class="message" title="no activity in 7 days">Soumya Dipta Biswas</a>
</li>
<li>
<a href="https://krastanov.wordpress.com/category/sympy-2/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://krastanov.wordpress.com" class="message" title="no activity in 7 days">Stefan Krastanov</a>
</li>
<li>
<a href="http://www.sudhanshumishra.in/feeds/tag.sympy.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://www.sudhanshumishra.in/" title="Shortlog">Sudhanshu Mishra</a>
</li>
<li>
<a href="http://blog.sudhanshumishra.in/feeds/posts/default/-/sympy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://blog.sudhanshumishra.in/search/label/sympy" class="message" title="no activity in 7 days">Sudhanshu Mishra(Old)</a>
</li>
<li>
<a href="http://sushant-hiray.in/atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://sushant-hiray.me/{{ site.url }}" class="message" title="internal server error">Sushant Hiray</a>
</li>
<li>
<a href="http://tarzzz.github.io/rss.gsoc.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://tarzzz.github.io/gsoc14" class="message" title="404: not found">Tarun Gaba</a>
</li>
<li>
<a href="https://thilinaatsympy.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://thilinaatsympy.wordpress.com" class="message" title="no activity in 7 days">Thilina Rathnayake</a>
</li>
<li>
<a href="https://nessgrh.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://nessgrh.wordpress.com" class="message" title="no activity in 7 days">Tom Bachmann</a>
</li>
<li>
<a href="https://lazovichsympy.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://lazovichsympy.wordpress.com" class="message" title="no activity in 7 days">Tomo Lazovich</a>
</li>
<li>
<a href="https://sites.google.com/feeds/content/site/v9joshi?parent=5420265600325595988&amp;kind=announcement" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://sites.google.com/feeds/content/site/v9joshi" class="message" title="no activity in 7 days">Varun Joshi</a>
</li>
<li>
<a href="http://www.blogger.com/feeds/8814696591561172392/posts/default/-/SymPy" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://vperic.blogspot.com/search/label/SymPy" class="message" title="no activity in 7 days">Vladimir Perić</a>
</li>
<li>
<a href="https://ojensen.wordpress.com/feed/" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://ojensen.wordpress.com" class="message" title="no activity in 7 days">Øyvind Jensen</a>
</li>
</ul>

<p>
<strong>Last updated:</strong><br>
May 05, 2015 12:41 PM<br>
<em>All times are UTC.</em><br>
<br>
Powered by:<br>
<a href="http://www.planetplanet.org/"><img src="images/planet.png" width="80" height="15" alt="Planet" border="0"></a>
</p>

<p>
<h2>Planetarium:</h2>
<ul>
<li><a href="http://planet.scipy.org/">Planet SciPy</a></li>
<li><a href="http://planet.python.org/">Planet Python</a></li>
<li><a href="http://planet.sagemath.org/">Planet Sage</a></li>
</ul>
</p>
</div>
</body>

</html>
